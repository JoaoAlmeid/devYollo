"use strict";(()=>{var e={};e.id=3667,e.ids=[3667,660],e.modules={1323:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,r){return r in t?t[r]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,r)):"function"==typeof t&&"default"===r?t:void 0}}})},92300:(e,t,r)=>{r.d(t,{Z:()=>a});let a={src:"/_next/static/media/logo.7b4d1abf.png",height:156,width:584,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAYAAABllJ3tAAAATUlEQVR4nGM0qbiRysjMYf5s4+nV7AqiMr9+M/zkZPkvGKX74PvWO/I3GBWTzzt+Z+WX4r98/uwPPiFRrn/v/zEz/uMJ0Xz6d9cd/tsAm84dyxJGXe8AAAAASUVORK5CYII=",blurWidth:8,blurHeight:2}},27552:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{config:()=>y,default:()=>m,getServerSideProps:()=>f,getStaticPaths:()=>h,getStaticProps:()=>g,reportWebVitals:()=>x,routeModule:()=>I,unstable_getServerProps:()=>P,unstable_getServerSideProps:()=>A,unstable_getStaticParams:()=>v,unstable_getStaticPaths:()=>S,unstable_getStaticProps:()=>b});var o=r(87093),s=r(35244),n=r(1323),i=r(55388),l=r.n(i),u=r(16769),c=r.n(u),d=r(9860),p=e([d]);d=(p.then?(await p)():p)[0];let m=(0,n.l)(d,"default"),g=(0,n.l)(d,"getStaticProps"),h=(0,n.l)(d,"getStaticPaths"),f=(0,n.l)(d,"getServerSideProps"),y=(0,n.l)(d,"config"),x=(0,n.l)(d,"reportWebVitals"),b=(0,n.l)(d,"unstable_getStaticProps"),S=(0,n.l)(d,"unstable_getStaticPaths"),v=(0,n.l)(d,"unstable_getStaticParams"),P=(0,n.l)(d,"unstable_getServerProps"),A=(0,n.l)(d,"unstable_getServerSideProps"),I=new o.PagesRouteModule({definition:{kind:s.x.PAGES,page:"/Login",pathname:"/Login",bundlePath:"",filename:""},components:{App:c(),Document:l()},userland:d});a()}catch(e){a(e)}})},16769:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n}});let a=r(50167)._(r(16689)),o=r(96221);async function s(e){let{Component:t,ctx:r}=e;return{pageProps:await (0,o.loadGetInitialProps)(t,r)}}class n extends a.default.Component{render(){let{Component:e,pageProps:t}=this.props;return a.default.createElement(e,t)}}n.origGetInitialProps=s,n.getInitialProps=s,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},58582:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.d(t,{V:()=>i}),r(20997);var o=r(16689),s=r(85425),n=e([s]);s=(n.then?(await n)():n)[0];let i=(0,o.createContext)();a()}catch(e){a(e)}})},151:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.d(t,{Z:()=>u});var o=r(3590),s=r(92921),n=r(97026),i=r.n(n),l=e([o]);o=(l.then?(await l)():l)[0];let u=e=>{let t=e.response?.data?.error;if(t){if(s.a.exists(`backendErrors.${t}`)){o.toast.error(s.a.t(`backendErrors.${t}`),{toastId:t,autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!0,progress:void 0,theme:"light"});return}o.toast.error(t,{toastId:t,autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!0,progress:void 0,theme:"light"});return}if(i()(e)){o.toast.error(e);return}o.toast.error("An error occurred!")};a()}catch(e){a(e)}})},85425:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.d(t,{Z:()=>x});var o=r(16689),s=r(14661),n=r(98210),i=r.n(n),l=r(35599),u=r.n(l),c=r(3590),d=r(92921),p=r(38561),m=r(151),g=r(7405),h=r(32245),f=r.n(h),y=e([c,m,g]);[c,m,g]=y.then?(await y)():y;let x=()=>{let e=(0,s.useNavigate)(),[t,r]=(0,o.useState)(!1),[a,n]=(0,o.useState)(!0),[l,h]=(0,o.useState)({});p.Z.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${JSON.parse(t)}`,r(!0)),e},e=>{Promise.reject(e)}),p.Z.interceptors.response.use(e=>e,async e=>{let t=e.config;if(e?.response?.status===403&&!t._retry){t._retry=!0;let{data:e}=await p.Z.post("/auth/refresh_token");return e&&(localStorage.setItem("token",JSON.stringify(e.token)),p.Z.defaults.headers.Authorization=`Bearer ${e.token}`),(0,p.Z)(t)}return e?.response?.status===401&&(localStorage.removeItem("token"),localStorage.removeItem("companyId"),p.Z.defaults.headers.Authorization=void 0,r(!1)),Promise.reject(e)}),(0,o.useEffect)(()=>{let e=localStorage.getItem("token");(async()=>{if(e)try{let{data:e}=await p.Z.post("/auth/refresh_token");p.Z.defaults.headers.Authorization=`Bearer ${e.token}`,r(!0),h(e.user)}catch(e){(0,m.Z)(e)}n(!1)})()},[]),(0,o.useEffect)(()=>{let e=localStorage.getItem("companyId");if(e){let t=(0,g.C)({companyId:e});return t.on(`company-${e}-user`,e=>{"update"===e.action&&e.user.id===l.id&&h(e.user)}),()=>{t.disconnect()}}},[l]);let y=async t=>{n(!0);try{let{data:l}=await p.Z.post("/auth/login",t),{user:{companyId:g,id:y,company:x}}=l;if(i()(x,"settings")&&u()(x.settings)){let e=x.settings.find(e=>"campaignsEnabled"===e.key);e&&"true"===e.value&&localStorage.setItem("cshow",null)}f().locale("pt-br");let b=l.user.company.dueDate;f()(f()()).format("DD/MM/yyyy");let S=f()(b).format("DD/MM/yyyy");var a=f()(b).diff(f()(f()()).format()),o=f()(f()().format()).isBefore(b),s=f().duration(a).asDays();!0===o?(localStorage.setItem("token",JSON.stringify(l.token)),localStorage.setItem("companyId",g),localStorage.setItem("userId",y),localStorage.setItem("companyDueDate",S),p.Z.defaults.headers.Authorization=`Bearer ${l.token}`,h(l.user),r(!0),c.toast.success(d.a.t("auth.toasts.success")),5>Math.round(s)&&c.toast.warn(`Sua assinatura vence em ${Math.round(s)} ${1===Math.round(s)?"dia":"dias"} `),e.push("/tickets")):(0,m.Z)(`Opss! Sua assinatura venceu ${S}.
Entre em contato com o Suporte para mais informa\xe7\xf5es! `),n(!1)}catch(e){(0,m.Z)(e),n(!1)}},x=async()=>{n(!0);try{await p.Z.delete("/auth/logout"),r(!1),h({}),localStorage.removeItem("token"),localStorage.removeItem("companyId"),localStorage.removeItem("userId"),localStorage.removeItem("cshow"),p.Z.defaults.headers.Authorization=void 0,n(!1),e.push("/login")}catch(e){(0,m.Z)(e),n(!1)}},b=async()=>{try{let{data:e}=await p.Z.get("/auth/me");return e}catch(e){(0,m.Z)(e)}};return{isAuth:t,user:l,loading:a,handleLogin:y,handleLogout:x,getCurrentUserInfo:b}};a()}catch(e){a(e)}})},9860:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{default:()=>w});var o=r(20997),s=r(16689),n=r(14661),i=r(12610),l=r.n(i),u=r(13033),c=r.n(u),d=r(26481),p=r.n(d),m=r(61132),g=r.n(m),h=r(13266),f=r.n(h);r(40124),r(54104);var y=r(48308),x=r(32705),b=r.n(x),S=r(92921),v=r(58582),P=r(92300),A=e([v]);v=(A.then?(await A)():A)[0];let I=(0,y.makeStyles)(e=>({root:{width:"100vw",height:"100vh",backgroundImage:"url(https://siteconnect.com.br/wp-content/uploads/2023/03/cinema-scaled-1.jpg)",backgroundRepeat:"no-repeat",backgroundSize:"100% 100%",backgroundPosition:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center"},paper:{backgroundColor:e.palette.login,display:"flex",flexDirection:"column",alignItems:"center",padding:"55px 30px",borderRadius:"12.5px"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},powered:{color:"white"}})),w=()=>{let e=I(),[t,r]=(0,s.useState)({email:"",password:""}),{handleLogin:a}=(0,s.useContext)(v.V),i=e=>{r({...t,[e.target.name]:e.target.value})};return o.jsx("div",{className:e.root,children:(0,o.jsxs)(b(),{component:"main",maxWidth:"xs",children:[o.jsx(c(),{}),(0,o.jsxs)("div",{className:e.paper,children:[o.jsx("div",{children:o.jsx("img",{style:{margin:"0 auto",width:"100%"},src:P.Z,alt:"Whats"})}),(0,o.jsxs)("form",{className:e.form,noValidate:!0,onSubmit:e=>{e.preventDefault(),a(t)},children:[o.jsx(p(),{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:S.a.t("login.form.email"),name:"email",value:t.email,onChange:i,autoComplete:"email",autoFocus:!0}),o.jsx(p(),{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:S.a.t("login.form.password"),type:"password",id:"password",value:t.password,onChange:i,autoComplete:"current-password"}),o.jsx(l(),{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,children:S.a.t("login.buttons.submit")}),o.jsx(f(),{container:!0,children:o.jsx(f(),{item:!0,children:o.jsx(g(),{href:"#",variant:"body2",component:n.Link,to:"/signup",children:S.a.t("login.buttons.register")})})})]})]})]})})};a()}catch(e){a(e)}})},7405:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.d(t,{C:()=>l});var o=r(14612),s=r(75795),n=r.n(s),i=e([o]);function l(e){return localStorage.getItem("userId")&&localStorage.getItem("userId"),(0,o.default)(process.env.REACT_APP_BACKEND_URL,{transports:["websocket","polling","flashsocket"],pingTimeout:18e3,pingInterval:18e3,query:n()(e)?{...e}:{userId:e.userId}})}o=(i.then?(await i)():i)[0],a()}catch(e){a(e)}})},35244:(e,t)=>{var r;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return r}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(r||(r={}))},40124:e=>{e.exports=require("@material-ui/core/Box")},12610:e=>{e.exports=require("@material-ui/core/Button")},32705:e=>{e.exports=require("@material-ui/core/Container")},13033:e=>{e.exports=require("@material-ui/core/CssBaseline")},13266:e=>{e.exports=require("@material-ui/core/Grid")},61132:e=>{e.exports=require("@material-ui/core/Link")},26481:e=>{e.exports=require("@material-ui/core/TextField")},54104:e=>{e.exports=require("@material-ui/core/Typography")},48308:e=>{e.exports=require("@material-ui/core/styles")},52167:e=>{e.exports=require("axios")},18805:e=>{e.exports=require("i18next")},86071:e=>{e.exports=require("i18next-browser-languagedetector")},98210:e=>{e.exports=require("lodash/has")},35599:e=>{e.exports=require("lodash/isArray")},75795:e=>{e.exports=require("lodash/isObject")},97026:e=>{e.exports=require("lodash/isString")},32245:e=>{e.exports=require("moment")},62785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},16689:e=>{e.exports=require("react")},14661:e=>{e.exports=require("react-router-dom")},20997:e=>{e.exports=require("react/jsx-runtime")},3590:e=>{e.exports=import("react-toastify")},14612:e=>{e.exports=import("socket.io-client")},71017:e=>{e.exports=require("path")}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[5388,5800],()=>r(27552));module.exports=a})();