"use strict";(()=>{var e={};e.id=9451,e.ids=[9451,660],e.modules={41120:(e,r,t)=>{t.d(r,{Z:()=>l});var a=t(87462),i=t(43349),s=t(90953);let l=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,i.makeStyles)(e,(0,a.Z)({defaultTheme:s.Z},r))}},30097:(e,r,t)=>{t.a(e,async(e,a)=>{try{t.r(r),t.d(r,{config:()=>f,default:()=>m,getServerSideProps:()=>g,getStaticPaths:()=>h,getStaticProps:()=>x,reportWebVitals:()=>j,routeModule:()=>P,unstable_getServerProps:()=>b,unstable_getServerSideProps:()=>v,unstable_getStaticParams:()=>q,unstable_getStaticPaths:()=>y,unstable_getStaticProps:()=>S});var i=t(87093),s=t(35244),l=t(1323),o=t(55388),n=t.n(o),u=t(16769),d=t.n(u),c=t(53684),p=e([c]);c=(p.then?(await p)():p)[0];let m=(0,l.l)(c,"default"),x=(0,l.l)(c,"getStaticProps"),h=(0,l.l)(c,"getStaticPaths"),g=(0,l.l)(c,"getServerSideProps"),f=(0,l.l)(c,"config"),j=(0,l.l)(c,"reportWebVitals"),S=(0,l.l)(c,"unstable_getStaticProps"),y=(0,l.l)(c,"unstable_getStaticPaths"),q=(0,l.l)(c,"unstable_getStaticParams"),b=(0,l.l)(c,"unstable_getServerProps"),v=(0,l.l)(c,"unstable_getServerSideProps"),P=new i.PagesRouteModule({definition:{kind:s.x.PAGES,page:"/Users",pathname:"/Users",bundlePath:"",filename:""},components:{App:d(),Document:n()},userland:c});a()}catch(e){a(e)}})},29535:(e,r,t)=>{t.a(e,async(e,a)=>{try{t.d(r,{Z:()=>N});var i=t(20997),s=t(16689),l=t(75609),o=t(2296),n=t(3590),u=t(48308),d=t(55223),c=t(12610),p=t.n(c),m=t(26481),x=t.n(m),h=t(81961),g=t.n(h),f=t(80929),j=t.n(f),S=t(46856),y=t.n(S),q=t(82400),b=t.n(q),v=t(9069),P=t.n(v),T=t(84614),E=t.n(T),w=t(68190),C=t.n(w),Z=t(48250),M=t.n(Z),I=t(75811),_=t.n(I),k=t(92921),R=t(38561),F=t(151),A=t(71464),D=t(58582),L=t(20929),U=e([n,F,A,D]);[n,F,A,D]=U.then?(await U)():U;let W=(0,u.makeStyles)(e=>({root:{display:"flex",flexWrap:"wrap"},multFieldLine:{display:"flex","& > *:not(:last-child)":{marginRight:e.spacing(1)}},btnWrapper:{position:"relative"},buttonProgress:{color:d.green[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},formControl:{margin:e.spacing(1),minWidth:120}})),$=l.object().shape({name:l.string().min(2,"Too Short!").max(50,"Too Long!").required("Required"),password:l.string().min(5,"Too Short!").max(50,"Too Long!"),email:l.string().email("Invalid email").required("Required")}),N=({open:e,onClose:r,userId:t})=>{let a=W(),l={name:"",email:"",password:"",profile:"user"},{user:u}=(0,s.useContext)(D.V),[d,c]=(0,s.useState)(l),[m,h]=(0,s.useState)([]);(0,s.useEffect)(()=>{(async()=>{if(t)try{let{data:e}=await R.Z.get(`/users/${t}`);c(r=>({...r,...e}));let r=e.queues?.map(e=>e.id);h(r)}catch(e){(0,F.Z)(e)}})()},[t,e]);let f=()=>{r(),c(l)},S=async e=>{let r={...e,queueIds:m};try{t?await R.Z.put(`/users/${t}`,r):await R.Z.post("/users",r),n.toast.success(k.a.t("userModal.success"))}catch(e){(0,F.Z)(e)}f()};return i.jsx("div",{className:a.root,children:(0,i.jsxs)(g(),{open:e,onClose:f,maxWidth:"xs",fullWidth:!0,scroll:"paper",children:[i.jsx(b(),{id:"form-dialog-title",children:t?`${k.a.t("userModal.title.edit")}`:`${k.a.t("userModal.title.add")}`}),i.jsx(o.Formik,{initialValues:d,enableReinitialize:!0,validationSchema:$,onSubmit:(e,r)=>{setTimeout(()=>{S(e),r.setSubmitting(!1)},400)},children:({touched:e,errors:r,isSubmitting:s})=>(0,i.jsxs)(o.Form,{children:[(0,i.jsxs)(y(),{dividers:!0,children:[(0,i.jsxs)("div",{className:a.multFieldLine,children:[i.jsx(o.Field,{as:x(),label:k.a.t("userModal.form.name"),autoFocus:!0,name:"name",error:e.name&&!!r.name,helperText:e.name&&r.name,variant:"outlined",margin:"dense",fullWidth:!0}),i.jsx(o.Field,{as:x(),label:k.a.t("userModal.form.password"),type:"password",name:"password",error:e.password&&!!r.password,helperText:e.password&&r.password,variant:"outlined",margin:"dense",fullWidth:!0})]}),(0,i.jsxs)("div",{className:a.multFieldLine,children:[i.jsx(o.Field,{as:x(),label:k.a.t("userModal.form.email"),name:"email",error:e.email&&!!r.email,helperText:e.email&&r.email,variant:"outlined",margin:"dense",fullWidth:!0}),i.jsx(_(),{variant:"outlined",className:a.formControl,margin:"dense",children:i.jsx(L.m,{role:u.profile,perform:"user-modal:editProfile",yes:()=>(0,i.jsxs)(i.Fragment,{children:[i.jsx(C(),{id:"profile-selection-input-label",children:k.a.t("userModal.form.profile")}),(0,i.jsxs)(o.Field,{as:E(),label:k.a.t("userModal.form.profile"),name:"profile",labelId:"profile-selection-label",id:"profile-selection",required:!0,children:[i.jsx(M(),{value:"admin",children:"Admin"}),i.jsx(M(),{value:"user",children:"User"})]})]})})})]}),i.jsx(L.m,{role:u.profile,perform:"user-modal:editQueues",yes:()=>i.jsx(A.Z,{selectedQueueIds:m,onChange:e=>h(e)})})]}),(0,i.jsxs)(j(),{children:[i.jsx(p(),{onClick:f,color:"secondary",disabled:s,variant:"outlined",children:k.a.t("userModal.buttons.cancel")}),(0,i.jsxs)(p(),{type:"submit",color:"primary",disabled:s,variant:"contained",className:a.btnWrapper,children:[t?`${k.a.t("userModal.buttons.okEdit")}`:`${k.a.t("userModal.buttons.okAdd")}`,s&&i.jsx(P(),{size:24,className:a.buttonProgress})]})]})]})})]})})};a()}catch(e){a(e)}})},53684:(e,r,t)=>{t.a(e,async(e,a)=>{try{t.r(r),t.d(r,{default:()=>G});var i=t(20997),s=t(16689),l=t(3590),o=t(48308),n=t(40640),u=t.n(n),d=t(12610),c=t.n(d),p=t(4880),m=t.n(p),x=t(31555),h=t.n(x),g=t(42740),f=t.n(g),j=t(56956),S=t.n(j),y=t(11236),q=t.n(y),b=t(83974),v=t.n(b),P=t(94202),T=t.n(P),E=t(26481),w=t.n(E),C=t(32944),Z=t.n(C),M=t(4530),I=t.n(M),_=t(93365),k=t.n(_),R=t(96153),F=t(66276),A=t(37432),D=t(2926),L=t(38561),U=t(92921),W=t(29385),$=t(29535),N=t(6133),z=t(151),O=t(7405),V=e([l,$,z,O]);[l,$,z,O]=V.then?(await V)():V;let B=(e,r)=>{if("LOAD_USERS"===r.type){let t=r.payload,a=[];return t.forEach(r=>{let t=e.findIndex(e=>e.id===r.id);-1!==t?e[t]=r:a.push(r)}),[...e,...a]}if("UPDATE_USERS"===r.type){let t=r.payload,a=e.findIndex(e=>e.id===t.id);return -1!==a?(e[a]=t,[...e]):[t,...e]}if("DELETE_USER"===r.type){let t=r.payload,a=e.findIndex(e=>e.id===t);return -1!==a&&e.splice(a,1),[...e]}if("RESET"===r.type)return[]},Q=(0,o.makeStyles)(e=>({mainPaper:{flex:1,padding:e.spacing(1),overflowY:"scroll",...e.scrollbarStyles}})),G=()=>{let e=Q(),[r,t]=(0,s.useState)(!1),[a,o]=(0,s.useState)(1),[n,d]=(0,s.useState)(!1),[p,x]=(0,s.useState)(null),[g,j]=(0,s.useState)(null),[y,b]=(0,s.useState)(!1),[P,E]=(0,s.useState)(!1),[C,M]=(0,s.useState)(""),[_,V]=(0,s.useReducer)(B,[]);(0,s.useEffect)(()=>{V({type:"RESET"}),o(1)},[C]),(0,s.useEffect)(()=>{t(!0);let e=setTimeout(()=>{(async()=>{try{let{data:e}=await L.Z.get("/users/",{params:{searchParam:C,pageNumber:a}});V({type:"LOAD_USERS",payload:e.users}),d(e.hasMore),t(!1)}catch(e){(0,z.Z)(e)}})()},500);return()=>clearTimeout(e)},[C,a]),(0,s.useEffect)(()=>{let e=localStorage.getItem("companyId"),r=(0,O.C)({companyId:e});return r.on(`company-${e}-user`,e=>{("update"===e.action||"create"===e.action)&&V({type:"UPDATE_USERS",payload:e.user}),"delete"===e.action&&V({type:"DELETE_USER",payload:+e.userId})}),()=>{r.disconnect()}},[]);let G=e=>{x(e),b(!0)},H=async e=>{try{await L.Z.delete(`/users/${e}`),l.toast.success(U.a.t("users.toasts.deleted"))}catch(e){(0,z.Z)(e)}j(null),M(""),o(1)},X=()=>{o(e=>e+1)};return(0,i.jsxs)(R.Z,{children:[i.jsx(N.Z,{title:g&&`${U.a.t("users.confirmationModal.deleteTitle")} ${g.name}?`,open:P,onClose:E,onConfirm:()=>H(g.id),children:U.a.t("users.confirmationModal.deleteMessage")}),i.jsx($.Z,{open:y,onClose:()=>{x(null),b(!1)},"aria-labelledby":"form-dialog-title",userId:p&&p.id}),(0,i.jsxs)(F.Z,{children:[i.jsx(D.Z,{children:U.a.t("users.title")}),(0,i.jsxs)(A.Z,{children:[i.jsx(w(),{placeholder:U.a.t("contacts.searchPlaceholder"),type:"search",value:C,onChange:e=>{M(e.target.value.toLowerCase())},InputProps:{startAdornment:i.jsx(Z(),{position:"start",children:i.jsx(T(),{style:{color:"gray"}})})}}),i.jsx(c(),{variant:"contained",color:"primary",onClick:()=>{x(null),b(!0)},children:U.a.t("users.buttons.add")})]})]}),i.jsx(u(),{className:e.mainPaper,variant:"outlined",onScroll:e=>{if(!n||r)return;let{scrollTop:t,scrollHeight:a,clientHeight:i}=e.currentTarget;a-(t+100)<i&&X()},children:(0,i.jsxs)(m(),{size:"small",children:[i.jsx(S(),{children:(0,i.jsxs)(q(),{children:[i.jsx(f(),{align:"center",children:U.a.t("users.table.name")}),i.jsx(f(),{align:"center",children:U.a.t("users.table.email")}),i.jsx(f(),{align:"center",children:U.a.t("users.table.profile")}),i.jsx(f(),{align:"center",children:U.a.t("users.table.actions")})]})}),i.jsx(h(),{children:(0,i.jsxs)(i.Fragment,{children:[_.map(e=>(0,i.jsxs)(q(),{children:[i.jsx(f(),{align:"center",children:e.name}),i.jsx(f(),{align:"center",children:e.email}),i.jsx(f(),{align:"center",children:e.profile}),(0,i.jsxs)(f(),{align:"center",children:[i.jsx(v(),{size:"small",onClick:()=>G(e),children:i.jsx(k(),{})}),i.jsx(v(),{size:"small",onClick:r=>{E(!0),j(e)},children:i.jsx(I(),{})})]})]},e.id)),r&&i.jsx(W.Z,{columns:4})]})})]})})]})};a()}catch(e){a(e)}})},12610:e=>{e.exports=require("@material-ui/core/Button")},85798:e=>{e.exports=require("@material-ui/core/Chip")},9069:e=>{e.exports=require("@material-ui/core/CircularProgress")},32705:e=>{e.exports=require("@material-ui/core/Container")},81961:e=>{e.exports=require("@material-ui/core/Dialog")},80929:e=>{e.exports=require("@material-ui/core/DialogActions")},46856:e=>{e.exports=require("@material-ui/core/DialogContent")},82400:e=>{e.exports=require("@material-ui/core/DialogTitle")},75811:e=>{e.exports=require("@material-ui/core/FormControl")},83974:e=>{e.exports=require("@material-ui/core/IconButton")},32944:e=>{e.exports=require("@material-ui/core/InputAdornment")},68190:e=>{e.exports=require("@material-ui/core/InputLabel")},48250:e=>{e.exports=require("@material-ui/core/MenuItem")},40640:e=>{e.exports=require("@material-ui/core/Paper")},84614:e=>{e.exports=require("@material-ui/core/Select")},4880:e=>{e.exports=require("@material-ui/core/Table")},31555:e=>{e.exports=require("@material-ui/core/TableBody")},42740:e=>{e.exports=require("@material-ui/core/TableCell")},56956:e=>{e.exports=require("@material-ui/core/TableHead")},11236:e=>{e.exports=require("@material-ui/core/TableRow")},26481:e=>{e.exports=require("@material-ui/core/TextField")},54104:e=>{e.exports=require("@material-ui/core/Typography")},55223:e=>{e.exports=require("@material-ui/core/colors")},48308:e=>{e.exports=require("@material-ui/core/styles")},4530:e=>{e.exports=require("@material-ui/icons/DeleteOutline")},93365:e=>{e.exports=require("@material-ui/icons/Edit")},94202:e=>{e.exports=require("@material-ui/icons/Search")},44164:e=>{e.exports=require("@material-ui/lab/Skeleton")},43349:e=>{e.exports=require("@material-ui/styles")},95027:e=>{e.exports=require("@material-ui/system")},23874:e=>{e.exports=require("@material-ui/utils")},52167:e=>{e.exports=require("axios")},2296:e=>{e.exports=require("formik")},18805:e=>{e.exports=require("i18next")},86071:e=>{e.exports=require("i18next-browser-languagedetector")},98210:e=>{e.exports=require("lodash/has")},35599:e=>{e.exports=require("lodash/isArray")},75795:e=>{e.exports=require("lodash/isObject")},97026:e=>{e.exports=require("lodash/isString")},32245:e=>{e.exports=require("moment")},62785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},16689:e=>{e.exports=require("react")},14661:e=>{e.exports=require("react-router-dom")},20997:e=>{e.exports=require("react/jsx-runtime")},75609:e=>{e.exports=require("yup")},3590:e=>{e.exports=import("react-toastify")},14612:e=>{e.exports=import("socket.io-client")},71017:e=>{e.exports=require("path")}};var r=require("../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[5388,9908,5800,3834],()=>t(30097));module.exports=a})();