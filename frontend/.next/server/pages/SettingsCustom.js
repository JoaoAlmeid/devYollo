"use strict";(()=>{var e={};e.id=3855,e.ids=[3855,660],e.modules={55730:(e,a,t)=>{t.a(e,async(e,s)=>{try{t.r(a),t.d(a,{config:()=>j,default:()=>h,getServerSideProps:()=>g,getStaticPaths:()=>x,getStaticProps:()=>p,reportWebVitals:()=>f,routeModule:()=>w,unstable_getServerProps:()=>b,unstable_getServerSideProps:()=>S,unstable_getStaticParams:()=>v,unstable_getStaticPaths:()=>Z,unstable_getStaticProps:()=>y});var i=t(87093),l=t(35244),n=t(1323),r=t(55388),o=t.n(r),c=t(16769),d=t.n(c),u=t(10303),m=e([u]);u=(m.then?(await m)():m)[0];let h=(0,n.l)(u,"default"),p=(0,n.l)(u,"getStaticProps"),x=(0,n.l)(u,"getStaticPaths"),g=(0,n.l)(u,"getServerSideProps"),j=(0,n.l)(u,"config"),f=(0,n.l)(u,"reportWebVitals"),y=(0,n.l)(u,"unstable_getStaticProps"),Z=(0,n.l)(u,"unstable_getStaticPaths"),v=(0,n.l)(u,"unstable_getStaticParams"),b=(0,n.l)(u,"unstable_getServerProps"),S=(0,n.l)(u,"unstable_getServerSideProps"),w=new i.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/SettingsCustom",pathname:"/SettingsCustom",bundlePath:"",filename:""},components:{App:d(),Document:o()},userland:u});s()}catch(e){s(e)}})},20929:(e,a,t)=>{t.d(a,{m:()=>l});let s={user:{static:[]},admin:{static:["dashboard:view","drawer-admin-items:view","tickets-manager:showall","user-modal:editProfile","user-modal:editQueues","ticket-options:deleteTicket","contacts-page:deleteContact","connections-page:actionButtons","connections-page:addConnection","connections-page:editOrDeleteConnection"]}},i=(e,a,t)=>{let i=s[e];if(!i)return!1;let l=i.static;if(l&&l.includes(a))return!0;let n=i.dynamic;if(n){let e=n[a];return!!e&&e(t)}return!1},l=({role:e,perform:a,data:t,yes:s,no:l})=>i(e,a,t)?s():l();l.defaultProps={yes:()=>null,no:()=>null}},27081:(e,a,t)=>{t.a(e,async(e,s)=>{try{t.d(a,{ZP:()=>L});var i=t(20997),l=t(16689),n=t(41120),r=t(41749),o=t(39803),c=t(64436),d=t(85161),u=t(94924),m=t(85639),h=t(79895),p=t(82302),x=t(83750),g=t(57394),j=t(88222),f=t(99613),y=t(17812),Z=t(2296),v=t(79213),b=t(6133),S=t(30387),w=t(3590),C=t(23703),k=t(48888),N=t(18407),q=t(38561),D=t(56667),T=t.n(D),A=t(35599),I=t.n(A),E=t(98210),P=t.n(E),M=t(74846),z=t(32245),W=t.n(z),F=e([w,N]);[w,N]=F.then?(await F)():F;let R=(0,n.Z)(e=>({root:{width:"100%"},mainPaper:{width:"100%",flex:1,padding:e.spacing(2)},fullWidth:{width:"100%"},tableContainer:{width:"100%",overflowX:"scroll",...e.scrollbarStyles},textfield:{width:"100%"},textRight:{textAlign:"right"},row:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},control:{paddingRight:e.spacing(1),paddingLeft:e.spacing(1)},buttonContainer:{textAlign:"right",padding:e.spacing(1)}}));function Y(e){let{onSubmit:a,onDelete:t,onCancel:s,initialValue:n,loading:h}=e,p=R(),[x,g]=(0,l.useState)([]),[j,f]=(0,l.useState)(!1),[y,b]=(0,l.useState)({}),[S,C]=(0,l.useState)({name:"",email:"",phone:"",planId:"",status:!0,campaignsEnabled:!1,dueDate:"",recurrence:"",...n}),{list:D}=(0,k.Z)();(0,l.useEffect)(()=>{(async function(){let e=await D();g(e)})()},[]),(0,l.useEffect)(()=>{C(e=>(W()(n).isValid()&&(n.dueDate=W()(n.dueDate).format("YYYY-MM-DD")),{...e,...n}))},[n]);let A=async e=>{(""===e.dueDate||!1===W()(e.dueDate).isValid())&&(e.dueDate=null),a(e),C({...n,dueDate:""})},E=async()=>{try{let{data:e}=await q.Z.get("/users/list",{params:{companyId:n.id}});I()(e)&&e.length&&b(T()(e)),f(!0)}catch(e){w.toast.error(e)}},P=()=>{let e={...S};if(""!==e.dueDate&&null!==e.dueDate)switch(e.recurrence){case"MENSAL":e.dueDate=W()(e.dueDate).add(1,"month").format("YYYY-MM-DD");break;case"BIMESTRAL":e.dueDate=W()(e.dueDate).add(2,"month").format("YYYY-MM-DD");break;case"TRIMESTRAL":e.dueDate=W()(e.dueDate).add(3,"month").format("YYYY-MM-DD");break;case"SEMESTRAL":e.dueDate=W()(e.dueDate).add(6,"month").format("YYYY-MM-DD");break;case"ANUAL":e.dueDate=W()(e.dueDate).add(12,"month").format("YYYY-MM-DD")}C(e)};return(0,i.jsxs)(i.Fragment,{children:[i.jsx(N.Z,{userId:y.id,companyId:n.id,open:j,onClose:()=>{b({}),f(!1)}}),i.jsx(Z.Formik,{enableReinitialize:!0,className:p.fullWidth,initialValues:S,onSubmit:(e,{resetForm:a})=>setTimeout(()=>{A(e),a()},500),children:(e,a)=>i.jsx(Z.Form,{className:p.fullWidth,children:(0,i.jsxs)(r.Z,{spacing:2,justifyContent:"flex-end",container:!0,children:[i.jsx(r.Z,{xs:12,sm:6,md:4,item:!0,children:i.jsx(Z.Field,{as:o.Z,label:"Nome",name:"name",variant:"outlined",className:p.fullWidth,margin:"dense"})}),i.jsx(r.Z,{xs:12,sm:6,md:2,item:!0,children:i.jsx(Z.Field,{as:o.Z,label:"E-mail",name:"email",variant:"outlined",className:p.fullWidth,margin:"dense",required:!0})}),i.jsx(r.Z,{xs:12,sm:6,md:2,item:!0,children:i.jsx(Z.Field,{as:o.Z,label:"Telefone",name:"phone",variant:"outlined",className:p.fullWidth,margin:"dense"})}),i.jsx(r.Z,{xs:12,sm:6,md:2,item:!0,children:(0,i.jsxs)(c.Z,{margin:"dense",variant:"outlined",fullWidth:!0,children:[i.jsx(d.Z,{htmlFor:"plan-selection",children:"Plano"}),i.jsx(Z.Field,{as:u.Z,id:"plan-selection",label:"Plano",labelId:"plan-selection-label",name:"planId",margin:"dense",required:!0,children:x.map((e,a)=>i.jsx(m.Z,{value:e.id,children:e.name},a))})]})}),i.jsx(r.Z,{xs:12,sm:6,md:2,item:!0,children:(0,i.jsxs)(c.Z,{margin:"dense",variant:"outlined",fullWidth:!0,children:[i.jsx(d.Z,{htmlFor:"status-selection",children:"Status"}),(0,i.jsxs)(Z.Field,{as:u.Z,id:"status-selection",label:"Status",labelId:"status-selection-label",name:"status",margin:"dense",children:[i.jsx(m.Z,{value:!0,children:"Sim"}),i.jsx(m.Z,{value:!1,children:"N\xe3o"})]})]})}),i.jsx(r.Z,{xs:12,sm:6,md:2,item:!0,children:(0,i.jsxs)(c.Z,{margin:"dense",variant:"outlined",fullWidth:!0,children:[i.jsx(d.Z,{htmlFor:"status-selection",children:"Campanhas"}),(0,i.jsxs)(Z.Field,{as:u.Z,id:"campaigns-selection",label:"Campanhas",labelId:"campaigns-selection-label",name:"campaignsEnabled",margin:"dense",children:[i.jsx(m.Z,{value:!0,children:"Habilitadas"}),i.jsx(m.Z,{value:!1,children:"Desabilitadas"})]})]})}),i.jsx(r.Z,{xs:12,sm:6,md:2,item:!0,children:i.jsx(c.Z,{variant:"outlined",fullWidth:!0,children:i.jsx(Z.Field,{as:o.Z,label:"Data de Vencimento",type:"date",name:"dueDate",InputLabelProps:{shrink:!0},variant:"outlined",fullWidth:!0,margin:"dense"})})}),i.jsx(r.Z,{xs:12,sm:6,md:2,item:!0,children:(0,i.jsxs)(c.Z,{margin:"dense",variant:"outlined",fullWidth:!0,children:[i.jsx(d.Z,{htmlFor:"recorrencia-selection",children:"Recorr\xeancia"}),i.jsx(Z.Field,{as:u.Z,label:"Recorr\xeancia",labelId:"recorrencia-selection-label",id:"recurrence",name:"recurrence",margin:"dense",children:i.jsx(m.Z,{value:"MENSAL",children:"Mensal"})})]})}),i.jsx(r.Z,{xs:12,item:!0,children:(0,i.jsxs)(r.Z,{justifyContent:"flex-end",spacing:1,container:!0,children:[i.jsx(r.Z,{xs:4,md:1,item:!0,children:i.jsx(v.Z,{className:p.fullWidth,style:{marginTop:7},loading:h,onClick:()=>s(),variant:"contained",children:"Limpar"})}),void 0!==S.id?(0,i.jsxs)(i.Fragment,{children:[i.jsx(r.Z,{xs:6,md:1,item:!0,children:i.jsx(v.Z,{style:{marginTop:7},className:p.fullWidth,loading:h,onClick:()=>t(S),variant:"contained",color:"secondary",children:"Excluir"})}),i.jsx(r.Z,{xs:6,md:2,item:!0,children:i.jsx(v.Z,{style:{marginTop:7},className:p.fullWidth,loading:h,onClick:()=>P(),variant:"contained",color:"primary",children:"+ Vencimento"})}),i.jsx(r.Z,{xs:6,md:1,item:!0,children:i.jsx(v.Z,{style:{marginTop:7},className:p.fullWidth,loading:h,onClick:()=>E(),variant:"contained",color:"primary",children:"Usu\xe1rio"})})]}):null,i.jsx(r.Z,{xs:6,md:1,item:!0,children:i.jsx(v.Z,{className:p.fullWidth,style:{marginTop:7},loading:h,type:"submit",variant:"contained",color:"primary",children:"Salvar"})})]})})]})})})]})}function O(e){let{records:a,onSelect:t}=e,s=R(),{dateToClient:l}=(0,M.Y)(),n=e=>!1===e.status?"N\xe3o":"Sim",r=e=>null!==e.planId?e.plan.name:"-",o=e=>{if(P()(e,"settings")&&I()(e.settings)&&e.settings.length>0){let a=e.settings.find(e=>"campaignsEnabled"===e.key);if(a)return"true"===a.value?"Habilitadas":"Desabilitadas"}return"Desabilitadas"},c=e=>{if(W()(e.dueDate).isValid()){let a=W()(),t=W()(e.dueDate).diff(a,"days");if(5===t)return{backgroundColor:"#fffead"};if(t>=-3&&t<=4)return{backgroundColor:"#f7cc8f"};if(-4===t)return{backgroundColor:"#fa8c8c"}}return{}};return i.jsx(h.Z,{className:s.tableContainer,children:(0,i.jsxs)(p.Z,{className:s.fullWidth,size:"small","aria-label":"a dense table",children:[i.jsx(x.Z,{children:(0,i.jsxs)(g.Z,{children:[i.jsx(j.Z,{align:"center",style:{width:"1%"},children:"#"}),i.jsx(j.Z,{align:"left",children:"Nome"}),i.jsx(j.Z,{align:"left",children:"E-mail"}),i.jsx(j.Z,{align:"left",children:"Telefone"}),i.jsx(j.Z,{align:"left",children:"Plano"}),i.jsx(j.Z,{align:"left",children:"Campanhas"}),i.jsx(j.Z,{align:"left",children:"Status"}),i.jsx(j.Z,{align:"left",children:"Criada Em"}),i.jsx(j.Z,{align:"left",children:"Vencimento"})]})}),i.jsx(f.Z,{children:a.map((e,a)=>(0,i.jsxs)(g.Z,{style:c(e),children:[i.jsx(j.Z,{align:"center",style:{width:"1%"},children:i.jsx(y.Z,{onClick:()=>t(e),"aria-label":"delete",children:i.jsx(S.Z,{})})}),i.jsx(j.Z,{align:"left",children:e.name||"-"}),i.jsx(j.Z,{align:"left",children:e.email||"-"}),i.jsx(j.Z,{align:"left",children:e.phone||"-"}),i.jsx(j.Z,{align:"left",children:r(e)}),i.jsx(j.Z,{align:"left",children:o(e)}),i.jsx(j.Z,{align:"left",children:n(e)}),i.jsx(j.Z,{align:"left",children:l(e.createdAt)}),(0,i.jsxs)(j.Z,{align:"left",children:[l(e.dueDate),i.jsx("br",{}),i.jsx("span",{children:e.recurrence})]})]},a))})]})})}function L(){let e=R(),{list:a,save:t,update:s,remove:n}=(0,C.Z)(),[o,c]=(0,l.useState)(!1),[d,u]=(0,l.useState)(!1),[m,p]=(0,l.useState)([]),[x,g]=(0,l.useState)({name:"",email:"",phone:"",planId:"",status:!0,campaignsEnabled:!1,dueDate:"",recurrence:""});(0,l.useEffect)(()=>{j()},[]);let j=async()=>{u(!0);try{let e=await a();p(e)}catch(e){w.toast.error("N\xe3o foi poss\xedvel carregar a lista de registros")}u(!1)},f=async e=>{u(!0);try{void 0!==e.id?await s(e):await t(e),await j(),Z(),w.toast.success("Opera\xe7\xe3o realizada com sucesso!")}catch(e){w.toast.error("N\xe3o foi poss\xedvel realizar a opera\xe7\xe3o. Verifique se j\xe1 existe uma empresa com o mesmo nome ou se os campos foram preenchidos corretamente")}u(!1)},y=async()=>{u(!0);try{await n(x.id),await j(),Z(),w.toast.success("Opera\xe7\xe3o realizada com sucesso!")}catch(e){w.toast.error("N\xe3o foi poss\xedvel realizar a opera\xe7\xe3o")}u(!1)},Z=()=>{g(e=>({...e,name:"",email:"",phone:"",planId:"",status:!0,campaignsEnabled:!1,dueDate:"",recurrence:""}))};return(0,i.jsxs)(h.Z,{className:e.mainPaper,elevation:0,children:[(0,i.jsxs)(r.Z,{spacing:2,container:!0,children:[i.jsx(r.Z,{xs:12,item:!0,children:i.jsx(Y,{initialValue:x,onDelete:()=>{c(!0)},onSubmit:f,onCancel:Z,loading:d})}),i.jsx(r.Z,{xs:12,item:!0,children:i.jsx(O,{records:m,onSelect:e=>{let a=!1,t=e.settings.find(e=>e.key.indexOf("campaignsEnabled")>-1);t&&(a="true"===t.value||"enabled"===t.value),g(t=>({...t,id:e.id,name:e.name||"",phone:e.phone||"",email:e.email||"",planId:e.planId||"",status:!1!==e.status,campaignsEnabled:a,dueDate:e.dueDate||"",recurrence:e.recurrence||""}))}})})]}),i.jsx(b.Z,{title:"Exclus\xe3o de Registro",open:o,onClose:()=>c(!1),onConfirm:()=>y(),children:"Deseja realmente excluir esse registro?"})]})}s()}catch(e){s(e)}})},60655:(e,a,t)=>{var s=t(20997);t(16689);var i=t(580),l=t.n(i),n=t(37597),r=t.n(n);let o=require("text-mask-addons/dist/createNumberMask");var c=t.n(o);let d={prefix:"R$",suffix:"",includeThousandsSeparator:!0,thousandsSeparatorSymbol:".",allowDecimal:!0,decimalSymbol:",",decimalLimit:2,integerLimit:7,allowNegative:!1,allowLeadingZeroes:!1},u=({maskOptions:e,...a})=>{let t=c()({...d,...e});return s.jsx(r(),{mask:t,...a})};u.defaultProps={inputMode:"numeric",maskOptions:{}},u.propTypes={inputmode:l().string,maskOptions:l().shape({prefix:l().string,suffix:l().string,includeThousandsSeparator:l().bool,thousandsSeparatorSymbol:l().string,allowDecimal:l().bool,decimalSymbol:l().string,decimalLimit:l().string,requireDecimal:l().bool,allowNegative:l().bool,allowLeadingZeroes:l().bool,integerLimit:l().number})}},48855:(e,a,t)=>{t.a(e,async(e,s)=>{try{t.d(a,{ZP:()=>C});var i=t(20997),l=t(16689),n=t(41120),r=t(41749),o=t(39803),c=t(79895),d=t(82302),u=t(83750),m=t(57394),h=t(88222),p=t(99613),x=t(17812),g=t(2296),j=t(79213),f=t(6133),y=t(30387),Z=t(3590),v=t(94667),b=e([Z]);Z=(b.then?(await b)():b)[0];let k=(0,n.Z)(e=>({root:{width:"100%"},mainPaper:{width:"100%",flex:1,padding:e.spacing(2)},fullWidth:{width:"100%"},tableContainer:{width:"100%",overflowX:"scroll",...e.scrollbarStyles},textfield:{width:"100%"},textRight:{textAlign:"right"},row:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},control:{paddingRight:e.spacing(1),paddingLeft:e.spacing(1)},buttonContainer:{textAlign:"right",padding:e.spacing(1)}}));function S(e){let{onSubmit:a,onDelete:t,onCancel:s,initialValue:n,loading:c}=e,d=k(),[u,m]=(0,l.useState)(n);(0,l.useEffect)(()=>{m(n)},[n]);let h=async e=>{a(e)};return i.jsx(g.Formik,{enableReinitialize:!0,className:d.fullWidth,initialValues:u,onSubmit:(e,{resetForm:a})=>setTimeout(()=>{h(e),a()},500),children:e=>i.jsx(g.Form,{className:d.fullWidth,children:(0,i.jsxs)(r.Z,{spacing:2,justifyContent:"flex-end",container:!0,children:[i.jsx(r.Z,{xs:12,sm:6,md:3,item:!0,children:i.jsx(g.Field,{as:o.Z,label:"T\xedtulo",name:"title",variant:"outlined",className:d.fullWidth,margin:"dense"})}),i.jsx(r.Z,{xs:12,sm:6,md:3,item:!0,children:i.jsx(g.Field,{as:o.Z,label:"C\xf3digo do V\xeddeo",name:"video",variant:"outlined",className:d.fullWidth,margin:"dense"})}),i.jsx(r.Z,{xs:12,sm:12,md:6,item:!0,children:i.jsx(g.Field,{as:o.Z,label:"Descri\xe7\xe3o",name:"description",variant:"outlined",className:d.fullWidth,margin:"dense"})}),i.jsx(r.Z,{sm:3,md:1,item:!0,children:i.jsx(j.Z,{className:d.fullWidth,loading:c,onClick:()=>s(),variant:"contained",children:"Limpar"})}),void 0!==u.id?i.jsx(r.Z,{sm:3,md:1,item:!0,children:i.jsx(j.Z,{className:d.fullWidth,loading:c,onClick:()=>t(u),variant:"contained",color:"secondary",children:"Excluir"})}):null,i.jsx(r.Z,{sm:3,md:1,item:!0,children:i.jsx(j.Z,{className:d.fullWidth,loading:c,type:"submit",variant:"contained",color:"primary",children:"Salvar"})})]})})})}function w(e){let{records:a,onSelect:t}=e,s=k();return i.jsx(c.Z,{className:s.tableContainer,children:(0,i.jsxs)(d.Z,{className:s.fullWidth,size:"small","aria-label":"a dense table",children:[i.jsx(u.Z,{children:(0,i.jsxs)(m.Z,{children:[i.jsx(h.Z,{align:"center",style:{width:"1%"},children:"#"}),i.jsx(h.Z,{align:"left",children:"T\xedtulo"}),i.jsx(h.Z,{align:"left",children:"Descri\xe7\xe3o"}),i.jsx(h.Z,{align:"left",children:"V\xeddeo"})]})}),i.jsx(p.Z,{children:a.map(e=>(0,i.jsxs)(m.Z,{children:[i.jsx(h.Z,{align:"center",style:{width:"1%"},children:i.jsx(x.Z,{onClick:()=>t(e),"aria-label":"delete",children:i.jsx(y.Z,{})})}),i.jsx(h.Z,{align:"left",children:e.title||"-"}),i.jsx(h.Z,{align:"left",children:e.description||"-"}),i.jsx(h.Z,{align:"left",children:e.video||"-"})]},e.id))})]})})}function C(){let e=k(),{list:a,save:t,update:s,remove:n}=(0,v.Z)(),[o,d]=(0,l.useState)(!1),[u,m]=(0,l.useState)(!1),[h,p]=(0,l.useState)([]),[x,g]=(0,l.useState)({title:"",description:"",video:""});(0,l.useEffect)(()=>{(async function(){await j()})()},[]);let j=async()=>{m(!0);try{let e=await a();p(e)}catch(e){Z.toast.error("N\xe3o foi poss\xedvel carregar a lista de registros")}m(!1)},y=async e=>{m(!0);try{void 0!==e.id?await s(e):await t(e),await j(),C(),Z.toast.success("Opera\xe7\xe3o realizada com sucesso!")}catch(e){Z.toast.error("N\xe3o foi poss\xedvel realizar a opera\xe7\xe3o. Verifique se j\xe1 existe uma helpo com o mesmo nome ou se os campos foram preenchidos corretamente")}m(!1)},b=async()=>{m(!0);try{await n(x.id),await j(),C(),Z.toast.success("Opera\xe7\xe3o realizada com sucesso!")}catch(e){Z.toast.error("N\xe3o foi poss\xedvel realizar a opera\xe7\xe3o")}m(!1)},C=()=>{g({title:"",description:"",video:""})};return(0,i.jsxs)(c.Z,{className:e.mainPaper,elevation:0,children:[(0,i.jsxs)(r.Z,{spacing:2,container:!0,children:[i.jsx(r.Z,{xs:12,item:!0,children:i.jsx(S,{initialValue:x,onDelete:()=>{d(!0)},onSubmit:y,onCancel:C,loading:u})}),i.jsx(r.Z,{xs:12,item:!0,children:i.jsx(w,{records:h,onSelect:e=>{g({id:e.id,title:e.title||"",description:e.description||"",video:e.video||""})}})})]}),i.jsx(f.Z,{title:"Exclus\xe3o de Registro",open:o,onClose:()=>d(!1),onConfirm:()=>b(),children:"Deseja realmente excluir esse registro?"})]})}s()}catch(e){s(e)}})},18407:(e,a,t)=>{t.a(e,async(e,s)=>{try{t.d(a,{Z:()=>R});var i=t(20997),l=t(16689),n=t(75609),r=t(2296),o=t(3590),c=t(48308),d=t(55223),u=t(12610),m=t.n(u),h=t(26481),p=t.n(h),x=t(81961),g=t.n(x),j=t(80929),f=t.n(j),y=t(46856),Z=t.n(y),v=t(82400),b=t.n(v),S=t(9069),w=t.n(S),C=t(84614),k=t.n(C),N=t(68190),q=t.n(N),D=t(48250),T=t.n(D),A=t(75811),I=t.n(A),E=t(92921),P=t(38561),M=t(151),z=t(49695),W=t(58582),F=t(20929),Y=e([o,M,z,W]);[o,M,z,W]=Y.then?(await Y)():Y;let O=(0,c.makeStyles)(e=>({root:{display:"flex",flexWrap:"wrap"},multFieldLine:{display:"flex","& > *:not(:last-child)":{marginRight:e.spacing(1)}},btnWrapper:{position:"relative"},buttonProgress:{color:d.green[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},formControl:{margin:e.spacing(1),minWidth:120}})),L=n.object().shape({name:n.string().min(2,"Too Short!").max(50,"Too Long!").required("Required"),password:n.string().min(5,"Too Short!").max(50,"Too Long!"),email:n.string().email("Invalid email").required("Required")}),R=({open:e,onClose:a,userId:t,companyId:s})=>{let n=O(),c={name:"",email:"",password:"",profile:"user"},{user:d}=(0,l.useContext)(W.V),[u,h]=(0,l.useState)(c),[x,j]=(0,l.useState)([]);(0,l.useEffect)(()=>{(async()=>{if(t&&e)try{let{data:e}=await P.Z.get(`/users/${t}`);h(a=>({...a,...e}));let a=e.queues?.map(e=>e.id);j(a)}catch(e){(0,M.Z)(e)}})()},[t,e]);let y=()=>{a(),h(c)},v=async e=>{let a={...e,companyId:s,queueIds:x};try{t?await P.Z.put(`/users/${t}`,a):await P.Z.post("/users",a),o.toast.success(E.a.t("userModal.success"))}catch(e){(0,M.Z)(e)}y()};return i.jsx("div",{className:n.root,children:(0,i.jsxs)(g(),{open:e,onClose:y,maxWidth:"xs",fullWidth:!0,scroll:"paper",children:[i.jsx(b(),{id:"form-dialog-title",children:t?`${E.a.t("userModal.title.edit")}`:`${E.a.t("userModal.title.add")}`}),i.jsx(r.Formik,{initialValues:u,enableReinitialize:!0,validationSchema:L,onSubmit:(e,a)=>{setTimeout(()=>{v(e),a.setSubmitting(!1)},400)},children:({touched:e,errors:a,isSubmitting:l})=>(0,i.jsxs)(r.Form,{children:[(0,i.jsxs)(Z(),{dividers:!0,children:[(0,i.jsxs)("div",{className:n.multFieldLine,children:[i.jsx(r.Field,{as:p(),label:E.a.t("userModal.form.name"),autoFocus:!0,name:"name",error:e.name&&!!a.name,helperText:e.name&&a.name,variant:"outlined",margin:"dense",fullWidth:!0}),i.jsx(r.Field,{as:p(),label:E.a.t("userModal.form.password"),type:"password",name:"password",error:e.password&&!!a.password,helperText:e.password&&a.password,variant:"outlined",margin:"dense",fullWidth:!0})]}),(0,i.jsxs)("div",{className:n.multFieldLine,children:[i.jsx(r.Field,{as:p(),label:E.a.t("userModal.form.email"),name:"email",error:e.email&&!!a.email,helperText:e.email&&a.email,variant:"outlined",margin:"dense",fullWidth:!0}),i.jsx(I(),{variant:"outlined",className:n.formControl,margin:"dense",children:i.jsx(F.m,{role:d.profile,perform:"user-modal:editProfile",yes:()=>(0,i.jsxs)(i.Fragment,{children:[i.jsx(q(),{id:"profile-selection-input-label",children:E.a.t("userModal.form.profile")}),(0,i.jsxs)(r.Field,{as:k(),label:E.a.t("userModal.form.profile"),name:"profile",labelId:"profile-selection-label",id:"profile-selection",required:!0,children:[i.jsx(T(),{value:"admin",children:"Admin"}),i.jsx(T(),{value:"user",children:"User"})]})]})})})]}),i.jsx(F.m,{role:d.profile,perform:"user-modal:editQueues",yes:()=>i.jsx(z.Z,{companyId:s,selectedQueueIds:x,onChange:e=>j(e)})})]}),(0,i.jsxs)(f(),{children:[i.jsx(m(),{onClick:y,color:"secondary",disabled:l,variant:"outlined",children:E.a.t("userModal.buttons.cancel")}),(0,i.jsxs)(m(),{type:"submit",color:"primary",disabled:l,variant:"contained",className:n.btnWrapper,children:[t?`${E.a.t("userModal.buttons.okEdit")}`:`${E.a.t("userModal.buttons.okAdd")}`,l&&i.jsx(w(),{size:24,className:n.buttonProgress})]})]})]})})]})})};s()}catch(e){s(e)}})},68620:(e,a,t)=>{t.d(a,{Z:()=>i});let s=({user:e,yes:a,no:t})=>e.super?a():t();s.defaultProps={user:{},yes:()=>null,no:()=>null};let i=s},84405:(e,a,t)=>{t.a(e,async(e,s)=>{try{t.d(a,{ZP:()=>C});var i=t(20997),l=t(16689),n=t(41120),r=t(41749),o=t(39803),c=t(79895),d=t(82302),u=t(83750),m=t(57394),h=t(88222),p=t(99613),x=t(17812),g=t(2296),j=t(79213),f=t(6133);t(60655),t(24648);var y=t(30387);t(39475),t(37597);var Z=t(3590),v=t(48888),b=e([Z]);Z=(b.then?(await b)():b)[0];let k=(0,n.Z)(e=>({root:{width:"100%"},mainPaper:{width:"100%",flex:1,padding:e.spacing(2)},fullWidth:{width:"100%"},tableContainer:{width:"100%",overflowX:"scroll",...e.scrollbarStyles},textfield:{width:"100%"},textRight:{textAlign:"right"},row:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},control:{paddingRight:e.spacing(1),paddingLeft:e.spacing(1)},buttonContainer:{textAlign:"right",padding:e.spacing(1)}}));function S(e){let{onSubmit:a,onDelete:t,onCancel:s,initialValue:n,loading:c}=e,d=k(),[u,m]=(0,l.useState)({name:"",users:0,connections:0,queues:0,value:0});(0,l.useEffect)(()=>{m(n)},[n]);let h=async e=>{a(e)};return i.jsx(g.Formik,{enableReinitialize:!0,className:d.fullWidth,initialValues:u,onSubmit:(e,{resetForm:a})=>setTimeout(()=>{h(e),a()},500),children:e=>i.jsx(g.Form,{className:d.fullWidth,children:(0,i.jsxs)(r.Z,{spacing:2,justifyContent:"flex-end",container:!0,children:[i.jsx(r.Z,{xs:12,sm:6,md:4,item:!0,children:i.jsx(g.Field,{as:o.Z,label:"Nome",name:"name",variant:"outlined",className:d.fullWidth,margin:"dense"})}),i.jsx(r.Z,{xs:12,sm:6,md:4,item:!0,children:i.jsx(g.Field,{as:o.Z,label:"Valor",name:"value",variant:"outlined",className:d.fullWidth,margin:"dense",type:"text"})}),i.jsx(r.Z,{xs:12,sm:6,md:4,item:!0,children:i.jsx(g.Field,{as:o.Z,label:"Usu\xe1rios",name:"users",variant:"outlined",className:d.fullWidth,margin:"dense",type:"number"})}),i.jsx(r.Z,{xs:12,sm:6,md:4,item:!0,children:i.jsx(g.Field,{as:o.Z,label:"Conex\xf5es",name:"connections",variant:"outlined",className:d.fullWidth,margin:"dense",type:"number"})}),i.jsx(r.Z,{xs:12,sm:6,md:4,item:!0,children:i.jsx(g.Field,{as:o.Z,label:"Filas",name:"queues",variant:"outlined",className:d.fullWidth,margin:"dense",type:"number"})}),i.jsx(r.Z,{xs:12,item:!0,children:(0,i.jsxs)(r.Z,{justifyContent:"flex-end",spacing:1,container:!0,children:[i.jsx(r.Z,{xs:4,md:1,item:!0,children:i.jsx(j.Z,{className:d.fullWidth,loading:c,onClick:()=>s(),variant:"contained",children:"Limpar"})}),void 0!==u.id?i.jsx(r.Z,{xs:4,md:1,item:!0,children:i.jsx(j.Z,{className:d.fullWidth,loading:c,onClick:()=>t(u),variant:"contained",color:"secondary",children:"Excluir"})}):null,i.jsx(r.Z,{xs:4,md:1,item:!0,children:i.jsx(j.Z,{className:d.fullWidth,loading:c,type:"submit",variant:"contained",color:"primary",children:"Salvar"})})]})})]})})})}function w(e){let{records:a,onSelect:t}=e,s=k();return i.jsx(c.Z,{className:s.tableContainer,children:(0,i.jsxs)(d.Z,{className:s.fullWidth,size:"small","aria-label":"a dense table",children:[i.jsx(u.Z,{children:(0,i.jsxs)(m.Z,{children:[i.jsx(h.Z,{align:"center",style:{width:"1%"},children:"#"}),i.jsx(h.Z,{align:"left",children:"Nome"}),i.jsx(h.Z,{align:"center",children:"Usu\xe1rios"}),i.jsx(h.Z,{align:"center",children:"Conex\xf5es"}),i.jsx(h.Z,{align:"center",children:"Filas"}),i.jsx(h.Z,{align:"center",children:"Valor"})]})}),i.jsx(p.Z,{children:a.map(e=>(0,i.jsxs)(m.Z,{children:[i.jsx(h.Z,{align:"center",style:{width:"1%"},children:i.jsx(x.Z,{onClick:()=>t(e),"aria-label":"delete",children:i.jsx(y.Z,{})})}),i.jsx(h.Z,{align:"left",children:e.name||"-"}),i.jsx(h.Z,{align:"center",children:e.users||"-"}),i.jsx(h.Z,{align:"center",children:e.connections||"-"}),i.jsx(h.Z,{align:"center",children:e.queues||"-"}),i.jsx(h.Z,{align:"center",children:e.value.toLocaleString("pt-br",{style:"currency",currency:"BRL"})||"-"})]},e.id))})]})})}function C(){let e=k(),{list:a,save:t,update:s,remove:n}=(0,v.Z)(),[o,d]=(0,l.useState)(!1),[u,m]=(0,l.useState)(!1),[h,p]=(0,l.useState)([]),[x,g]=(0,l.useState)({name:"",users:0,connections:0,queues:0,value:0});(0,l.useEffect)(()=>{(async function(){await j()})()},[]);let j=async()=>{m(!0);try{let e=await a();p(e)}catch(e){Z.toast.error("N\xe3o foi poss\xedvel carregar a lista de registros")}m(!1)},y=async e=>{let a={id:e.id,connections:e.connections,name:e.name,queues:e.queues,users:e.users,value:e.value.replace(",",".")};m(!0);try{void 0!==e.id?await s(a):await t(a),await j(),C(),Z.toast.success("Opera\xe7\xe3o realizada com sucesso!")}catch(e){Z.toast.error("N\xe3o foi poss\xedvel realizar a opera\xe7\xe3o. Verifique se j\xe1 existe uma plano com o mesmo nome ou se os campos foram preenchidos corretamente")}m(!1)},b=async()=>{m(!0);try{await n(x.id),await j(),C(),Z.toast.success("Opera\xe7\xe3o realizada com sucesso!")}catch(e){Z.toast.error("N\xe3o foi poss\xedvel realizar a opera\xe7\xe3o")}m(!1)},C=()=>{g({name:"",users:0,connections:0,queues:0,value:0})};return(0,i.jsxs)(c.Z,{className:e.mainPaper,elevation:0,children:[(0,i.jsxs)(r.Z,{spacing:2,container:!0,children:[i.jsx(r.Z,{xs:12,item:!0,children:i.jsx(S,{initialValue:x,onDelete:()=>{d(!0)},onSubmit:y,onCancel:C,loading:u})}),i.jsx(r.Z,{xs:12,item:!0,children:i.jsx(w,{records:h,onSelect:e=>{g({id:e.id,name:e.name||"",users:e.users||0,connections:e.connections||0,queues:e.queues||0,value:e.value.toLocaleString("pt-br",{minimumFractionDigits:2})||0})}})})]}),i.jsx(f.Z,{title:"Exclus\xe3o de Registro",open:o,onClose:()=>d(!1),onConfirm:()=>b(),children:"Deseja realmente excluir esse registro?"})]})}s()}catch(e){s(e)}})},49695:(e,a,t)=>{t.a(e,async(e,s)=>{try{t.d(a,{Z:()=>b});var i=t(20997),l=t(16689),n=t(48308),r=t(68190),o=t.n(r),c=t(48250),d=t.n(c),u=t(75811),m=t.n(u),h=t(84614),p=t.n(h),x=t(85798),g=t.n(x),j=t(151),f=t(38561),y=t(92921),Z=e([j]);j=(Z.then?(await Z)():Z)[0];let v=(0,n.makeStyles)(e=>({chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2}})),b=({selectedQueueIds:e,companyId:a,onChange:t})=>{let s=v(),[n,r]=(0,l.useState)([]);return(0,l.useEffect)(()=>{(async()=>{try{let{data:e}=await f.Z.get("/queue",{params:{companyId:a}});r(e)}catch(e){(0,j.Z)(e)}})()},[a]),i.jsx("div",{style:{marginTop:6},children:(0,i.jsxs)(m(),{fullWidth:!0,margin:"dense",variant:"outlined",children:[i.jsx(o(),{children:y.a.t("queueSelect.inputLabel")}),i.jsx(p(),{multiple:!0,labelWidth:60,value:e,onChange:e=>{t(e.target.value)},MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null},renderValue:e=>i.jsx("div",{className:s.chips,children:e?.length>0&&e.map(e=>{let a=n.find(a=>a.id===e);return a?i.jsx(g(),{style:{backgroundColor:a.color},variant:"outlined",label:a.name,className:s.chip},e):null})}),children:n.map(e=>i.jsx(d(),{value:e.id,children:e.name},e.id))})]})})};s()}catch(e){s(e)}})},68984:(e,a,t)=>{t.a(e,async(e,s)=>{try{t.d(a,{Z:()=>N});var i=t(20997),l=t(16689),n=t(13266),r=t.n(n),o=t(48250),c=t.n(o),d=t(75811),u=t.n(d),m=t(68190),h=t.n(m),p=t(84614),x=t.n(p),g=t(68568),j=t.n(g),f=t(26481),y=t.n(f);t(2926),t(40640),t(54104);var Z=t(98662),v=t(3590),b=t(48308),S=t(55223),w=t(57821),C=t(41423),k=e([v]);v=(k.then?(await k)():k)[0];let q=(0,b.makeStyles)(e=>({container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},fixedHeightPaper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column",height:240},tab:{backgroundColor:e.palette.options,borderRadius:4,width:"100%","& .MuiTab-wrapper":{color:e.palette.fontecor},"& .MuiTabs-flexContainer":{justifyContent:"center"}},paper:{padding:e.spacing(2),display:"flex",alignItems:"center",marginBottom:12,width:"100%"},cardAvatar:{fontSize:"55px",color:S.grey[500],backgroundColor:"#ffffff",width:e.spacing(7),height:e.spacing(7)},cardTitle:{fontSize:"18px",color:S.blue[700]},cardSubtitle:{color:S.grey[600],fontSize:"14px"},alignRight:{textAlign:"right"},fullWidth:{width:"100%"},selectContainer:{width:"100%",textAlign:"left"}}));function N(e){let{settings:a,scheduleTypeChanged:t}=e,s=q(),[n,o]=(0,l.useState)("disabled"),[d,m]=(0,l.useState)("disabled"),[p,g]=(0,l.useState)("enabled"),[f,b]=(0,l.useState)(""),[S,k]=(0,l.useState)("enabled"),[N,D]=(0,l.useState)(!1),[T,A]=(0,l.useState)(!1),[I,E]=(0,l.useState)(!1),[P,M]=(0,l.useState)(!1),[z,W]=(0,l.useState)(!1),[F,Y]=(0,l.useState)(""),[O,L]=(0,l.useState)(!1),[R,V]=(0,l.useState)(""),[$,B]=(0,l.useState)(!1),[G,H]=(0,l.useState)(""),[_,U]=(0,l.useState)(!1),[X,J]=(0,l.useState)(""),[Q,K]=(0,l.useState)(!1),[ee,ea]=(0,l.useState)(""),[et,es]=(0,l.useState)(!1),[ei,el]=(0,l.useState)(""),[en,er]=(0,l.useState)(!1),[eo,ec]=(0,l.useState)("disabled"),[ed,eu]=(0,l.useState)(!1),[em,eh]=(0,l.useState)("disabled"),[ep,ex]=(0,l.useState)(!1),{update:eg}=(0,Z.Z)();async function ej(e){o(e),D(!0),await eg({key:"userRating",value:e}),v.toast.success("Opera\xe7\xe3o atualizada com sucesso."),D(!1)}async function ef(e){m(e),A(!0),await eg({key:"scheduleType",value:e}),v.toast.success("Opera\xe7\xe3o atualizada com sucesso.",{position:"top-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!0,theme:"light"}),A(!1),"function"==typeof t&&t(e)}async function ey(e){g(e),E(!0),await eg({key:"call",value:e}),v.toast.success("Opera\xe7\xe3o atualizada com sucesso."),E(!1)}async function eZ(e){b(e),M(!0),await eg({key:"chatBotType",value:e}),v.toast.success("Opera\xe7\xe3o atualizada com sucesso."),M(!1)}async function ev(e){k(e),W(!0),await eg({key:"CheckMsgIsGroup",value:e}),v.toast.success("Opera\xe7\xe3o atualizada com sucesso."),W(!1)}async function eb(e){ec(e),eu(!0),await eg({key:"sendGreetingAccepted",value:e}),v.toast.success("Opera\xe7\xe3o atualizada com sucesso."),eu(!1)}async function eS(e){eh(e),ex(!0),await eg({key:"sendMsgTransfTicket",value:e}),v.toast.success("Opera\xe7\xe3o atualizada com sucesso."),ex(!1)}async function ew(e){Y(e),L(!0),await eg({key:"ipixc",value:e}),v.toast.success("Opera\xe7\xe3o atualizada com sucesso."),L(!1)}async function eC(e){V(e),B(!0),await eg({key:"tokenixc",value:e}),v.toast.success("Opera\xe7\xe3o atualizada com sucesso."),B(!1)}async function ek(e){H(e),U(!0),await eg({key:"ipmkauth",value:e}),v.toast.success("Opera\xe7\xe3o atualizada com sucesso."),U(!1)}async function eN(e){J(e),K(!0),await eg({key:"clientidmkauth",value:e}),v.toast.success("Opera\xe7\xe3o atualizada com sucesso."),K(!1)}async function eq(e){ea(e),es(!0),await eg({key:"clientsecretmkauth",value:e}),v.toast.success("Opera\xe7\xe3o atualizada com sucesso."),es(!1)}async function eD(e){el(e),er(!0),await eg({key:"asaas",value:e}),v.toast.success("Opera\xe7\xe3o atualizada com sucesso."),er(!1)}return(0,l.useEffect)(()=>{if(Array.isArray(a)&&a.length){let e=a.find(e=>"userRating"===e.key);e&&o(e.value);let t=a.find(e=>"scheduleType"===e.key);t&&m(t.value);let s=a.find(e=>"call"===e.key);s&&g(s.value);let i=a.find(e=>"CheckMsgIsGroup"===e.key);i&&k(i.value);let l=a.find(e=>"sendGreetingAccepted"===e.key);l&&ec(l.value);let n=a.find(e=>"sendMsgTransfTicket"===e.key);n&&eh(n.value);let r=a.find(e=>"chatBotType"===e.key);r&&b(r.value);let c=a.find(e=>"ipixc"===e.key);c&&Y(c.value);let d=a.find(e=>"tokenixc"===e.key);d&&V(d.value);let u=a.find(e=>"ipmkauth"===e.key);u&&H(u.value);let h=a.find(e=>"clientidmkauth"===e.key);h&&J(h.value);let p=a.find(e=>"clientsecretmkauth"===e.key);p&&ea(p.value);let x=a.find(e=>"asaas"===e.key);x&&el(x.value)}},[a]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(r(),{spacing:3,container:!0,children:[i.jsx(r(),{xs:12,sm:6,md:4,item:!0,children:(0,i.jsxs)(u(),{className:s.selectContainer,children:[i.jsx(h(),{id:"ratings-label",children:"Avalia\xe7\xf5es"}),(0,i.jsxs)(x(),{labelId:"ratings-label",value:n,onChange:async e=>{ej(e.target.value)},children:[i.jsx(c(),{value:"disabled",children:"Desabilitadas"}),i.jsx(c(),{value:"enabled",children:"Habilitadas"})]}),i.jsx(j(),{children:N&&"Atualizando..."})]})}),i.jsx(r(),{xs:12,sm:6,md:4,item:!0,children:(0,i.jsxs)(u(),{className:s.selectContainer,children:[i.jsx(h(),{id:"schedule-type-label",children:"Gerenciamento de Expediente"}),(0,i.jsxs)(x(),{labelId:"schedule-type-label",value:d,onChange:async e=>{ef(e.target.value)},children:[i.jsx(c(),{value:"disabled",children:"Desabilitado"}),i.jsx(c(),{value:"queue",children:"Gerenciamento Por Fila"})]}),i.jsx(j(),{children:T&&"Atualizando..."})]})}),i.jsx(r(),{xs:12,sm:6,md:4,item:!0,children:(0,i.jsxs)(u(),{className:s.selectContainer,children:[i.jsx(h(),{id:"group-type-label",children:"Ignorar Mensagens de Grupos"}),(0,i.jsxs)(x(),{labelId:"group-type-label",value:S,onChange:async e=>{ev(e.target.value)},children:[i.jsx(c(),{value:"disabled",children:"Desativado"}),i.jsx(c(),{value:"enabled",children:"Ativado"})]}),i.jsx(j(),{children:T&&"Atualizando..."})]})}),i.jsx(r(),{xs:12,sm:6,md:4,item:!0,children:(0,i.jsxs)(u(),{className:s.selectContainer,children:[i.jsx(h(),{id:"call-type-label",children:"Aceitar Chamada"}),(0,i.jsxs)(x(),{labelId:"call-type-label",value:p,onChange:async e=>{ey(e.target.value)},children:[i.jsx(c(),{value:"disabled",children:"N\xe3o Aceitar"}),i.jsx(c(),{value:"enabled",children:"Aceitar"})]}),i.jsx(j(),{children:I&&"Atualizando..."})]})}),i.jsx(r(),{xs:12,sm:6,md:4,item:!0,children:(0,i.jsxs)(u(),{className:s.selectContainer,children:[i.jsx(h(),{id:"chatbot-type-label",children:"Tipo Chatbot"}),i.jsx(x(),{labelId:"chatbot-type-label",value:f,onChange:async e=>{eZ(e.target.value)},children:i.jsx(c(),{value:"text",children:"Texto"})}),i.jsx(j(),{children:P&&"Atualizando..."})]})}),i.jsx(r(),{xs:12,sm:6,md:4,item:!0,children:(0,i.jsxs)(u(),{className:s.selectContainer,children:[i.jsx(h(),{id:"sendGreetingAccepted-label",children:"Enviar sauda\xe7\xe3o ao aceitar o ticket"}),(0,i.jsxs)(x(),{labelId:"sendGreetingAccepted-label",value:eo,onChange:async e=>{eb(e.target.value)},children:[i.jsx(c(),{value:"disabled",children:"Desabilitado"}),i.jsx(c(),{value:"enabled",children:"Habilitado"})]}),i.jsx(j(),{children:ed&&"Atualizando..."})]})}),i.jsx(r(),{xs:12,sm:6,md:4,item:!0,children:(0,i.jsxs)(u(),{className:s.selectContainer,children:[i.jsx(h(),{id:"sendMsgTransfTicket-label",children:"Enviar mensagem de transferencia de Fila/agente"}),(0,i.jsxs)(x(),{labelId:"sendMsgTransfTicket-label",value:em,onChange:async e=>{eS(e.target.value)},children:[i.jsx(c(),{value:"disabled",children:"Desabilitado"}),i.jsx(c(),{value:"enabled",children:"Habilitado"})]}),i.jsx(j(),{children:ep&&"Atualizando..."})]})})]}),i.jsx(r(),{spacing:3,container:!0,children:i.jsx(w.Z,{indicatorColor:"primary",textColor:"primary",scrollButtons:"on",variant:"scrollable",className:s.tab,style:{marginBottom:20,marginTop:20},children:i.jsx(C.Z,{label:"INTEGRA\xc7\xd5ES"})})}),(0,i.jsxs)(r(),{spacing:3,container:!0,style:{marginBottom:10},children:[i.jsx(w.Z,{indicatorColor:"primary",textColor:"primary",scrollButtons:"on",variant:"scrollable",className:s.tab,children:i.jsx(C.Z,{label:"IXC"})}),i.jsx(r(),{xs:12,sm:6,md:6,item:!0,children:(0,i.jsxs)(u(),{className:s.selectContainer,children:[i.jsx(y(),{id:"ipixc",name:"ipixc",margin:"dense",label:"IP do IXC",variant:"outlined",value:F,onChange:async e=>{ew(e.target.value)}}),i.jsx(j(),{children:O&&"Atualizando..."})]})}),i.jsx(r(),{xs:12,sm:6,md:6,item:!0,children:(0,i.jsxs)(u(),{className:s.selectContainer,children:[i.jsx(y(),{id:"tokenixc",name:"tokenixc",margin:"dense",label:"Token do IXC",variant:"outlined",value:R,onChange:async e=>{eC(e.target.value)}}),i.jsx(j(),{children:$&&"Atualizando..."})]})})]}),(0,i.jsxs)(r(),{spacing:3,container:!0,style:{marginBottom:10},children:[i.jsx(w.Z,{indicatorColor:"primary",textColor:"primary",scrollButtons:"on",variant:"scrollable",className:s.tab,children:i.jsx(C.Z,{label:"MK-AUTH"})}),i.jsx(r(),{xs:12,sm:12,md:4,item:!0,children:(0,i.jsxs)(u(),{className:s.selectContainer,children:[i.jsx(y(),{id:"ipmkauth",name:"ipmkauth",margin:"dense",label:"Ip Mk-Auth",variant:"outlined",value:G,onChange:async e=>{ek(e.target.value)}}),i.jsx(j(),{children:_&&"Atualizando..."})]})}),i.jsx(r(),{xs:12,sm:12,md:4,item:!0,children:(0,i.jsxs)(u(),{className:s.selectContainer,children:[i.jsx(y(),{id:"clientidmkauth",name:"clientidmkauth",margin:"dense",label:"Client Id",variant:"outlined",value:X,onChange:async e=>{eN(e.target.value)}}),i.jsx(j(),{children:Q&&"Atualizando..."})]})}),i.jsx(r(),{xs:12,sm:12,md:4,item:!0,children:(0,i.jsxs)(u(),{className:s.selectContainer,children:[i.jsx(y(),{id:"clientsecretmkauth",name:"clientsecretmkauth",margin:"dense",label:"Client Secret",variant:"outlined",value:ee,onChange:async e=>{eq(e.target.value)}}),i.jsx(j(),{children:et&&"Atualizando..."})]})})]}),(0,i.jsxs)(r(),{spacing:3,container:!0,style:{marginBottom:10},children:[i.jsx(w.Z,{indicatorColor:"primary",textColor:"primary",scrollButtons:"on",variant:"scrollable",className:s.tab,children:i.jsx(C.Z,{label:"ASAAS"})}),i.jsx(r(),{xs:12,sm:12,md:12,item:!0,children:(0,i.jsxs)(u(),{className:s.selectContainer,children:[i.jsx(y(),{id:"asaas",name:"asaas",margin:"dense",label:"Token Asaas",variant:"outlined",value:ei,onChange:async e=>{eD(e.target.value)}}),i.jsx(j(),{children:en&&"Atualizando..."})]})})]})]})}s()}catch(e){s(e)}})},91903:(e,a,t)=>{t.d(a,{Z:()=>i});var s=t(20997);t(16689);let i=({children:e,value:a,name:t,...i})=>a===t?s.jsx("div",{role:"tabpanel",id:`simple-tabpanel-${t}`,"aria-labelledby":`simple-tab-${t}`,...i,children:s.jsx(s.Fragment,{children:e})}):null},58582:(e,a,t)=>{t.a(e,async(e,s)=>{try{t.d(a,{V:()=>r}),t(20997);var i=t(16689),l=t(85425),n=e([l]);l=(n.then?(await n)():n)[0];let r=(0,i.createContext)();s()}catch(e){s(e)}})},85425:(e,a,t)=>{t.a(e,async(e,s)=>{try{t.d(a,{Z:()=>f});var i=t(16689),l=t(14661),n=t(98210),r=t.n(n),o=t(35599),c=t.n(o),d=t(3590),u=t(92921),m=t(38561),h=t(151),p=t(7405),x=t(32245),g=t.n(x),j=e([d,h,p]);[d,h,p]=j.then?(await j)():j;let f=()=>{let e=(0,l.useNavigate)(),[a,t]=(0,i.useState)(!1),[s,n]=(0,i.useState)(!0),[o,x]=(0,i.useState)({});m.Z.interceptors.request.use(e=>{let a=localStorage.getItem("token");return a&&(e.headers.Authorization=`Bearer ${JSON.parse(a)}`,t(!0)),e},e=>{Promise.reject(e)}),m.Z.interceptors.response.use(e=>e,async e=>{let a=e.config;if(e?.response?.status===403&&!a._retry){a._retry=!0;let{data:e}=await m.Z.post("/auth/refresh_token");return e&&(localStorage.setItem("token",JSON.stringify(e.token)),m.Z.defaults.headers.Authorization=`Bearer ${e.token}`),(0,m.Z)(a)}return e?.response?.status===401&&(localStorage.removeItem("token"),localStorage.removeItem("companyId"),m.Z.defaults.headers.Authorization=void 0,t(!1)),Promise.reject(e)}),(0,i.useEffect)(()=>{let e=localStorage.getItem("token");(async()=>{if(e)try{let{data:e}=await m.Z.post("/auth/refresh_token");m.Z.defaults.headers.Authorization=`Bearer ${e.token}`,t(!0),x(e.user)}catch(e){(0,h.Z)(e)}n(!1)})()},[]),(0,i.useEffect)(()=>{let e=localStorage.getItem("companyId");if(e){let a=(0,p.C)({companyId:e});return a.on(`company-${e}-user`,e=>{"update"===e.action&&e.user.id===o.id&&x(e.user)}),()=>{a.disconnect()}}},[o]);let j=async a=>{n(!0);try{let{data:o}=await m.Z.post("/auth/login",a),{user:{companyId:p,id:j,company:f}}=o;if(r()(f,"settings")&&c()(f.settings)){let e=f.settings.find(e=>"campaignsEnabled"===e.key);e&&"true"===e.value&&localStorage.setItem("cshow",null)}g().locale("pt-br");let y=o.user.company.dueDate;g()(g()()).format("DD/MM/yyyy");let Z=g()(y).format("DD/MM/yyyy");var s=g()(y).diff(g()(g()()).format()),i=g()(g()().format()).isBefore(y),l=g().duration(s).asDays();!0===i?(localStorage.setItem("token",JSON.stringify(o.token)),localStorage.setItem("companyId",p),localStorage.setItem("userId",j),localStorage.setItem("companyDueDate",Z),m.Z.defaults.headers.Authorization=`Bearer ${o.token}`,x(o.user),t(!0),d.toast.success(u.a.t("auth.toasts.success")),5>Math.round(l)&&d.toast.warn(`Sua assinatura vence em ${Math.round(l)} ${1===Math.round(l)?"dia":"dias"} `),e.push("/tickets")):(0,h.Z)(`Opss! Sua assinatura venceu ${Z}.
Entre em contato com o Suporte para mais informa\xe7\xf5es! `),n(!1)}catch(e){(0,h.Z)(e),n(!1)}},f=async()=>{n(!0);try{await m.Z.delete("/auth/logout"),t(!1),x({}),localStorage.removeItem("token"),localStorage.removeItem("companyId"),localStorage.removeItem("userId"),localStorage.removeItem("cshow"),m.Z.defaults.headers.Authorization=void 0,n(!1),e.push("/login")}catch(e){(0,h.Z)(e),n(!1)}},y=async()=>{try{let{data:e}=await m.Z.get("/auth/me");return e}catch(e){(0,h.Z)(e)}};return{isAuth:a,user:o,loading:s,handleLogin:j,handleLogout:f,getCurrentUserInfo:y}};s()}catch(e){s(e)}})},23703:(e,a,t)=>{t.d(a,{Z:()=>i});var s=t(38561);let i=()=>({save:async e=>{let{data:a}=await s.Z.request({url:"/companies",method:"POST",data:e});return a},update:async e=>{let{data:a}=await s.Z.request({url:`/companies/${e.id}`,method:"PUT",data:e});return a},remove:async e=>{let{data:a}=await s.Z.request({url:`/companies/${e}`,method:"DELETE"});return a},list:async e=>{let{data:a}=await s.Z.request({url:"/companies/list",method:"GET"});return a},find:async e=>{let{data:a}=await s.Z.request({url:`/companies/${e}`,method:"GET"});return a},finding:async e=>{let{data:a}=await s.Z.request({url:`/companies/${e}`,method:"GET"});return a},findAll:async e=>{let{data:a}=await s.Z.request({url:"/companies",method:"GET"});return a},updateSchedules:async e=>{let{data:a}=await s.Z.request({url:`/companies/${e.id}/schedules`,method:"PUT",data:e});return a}})},74846:(e,a,t)=>{t.d(a,{Y:()=>l});var s=t(32245),i=t.n(s);function l(){return{dateToClient:function(e){return i()(e).isValid()?i()(e).format("DD/MM/YYYY"):e},datetimeToClient:function(e){return i()(e).isValid()?i()(e).format("DD/MM/YYYY HH:mm"):e},dateToDatabase:function(e){return i()(e,"DD/MM/YYYY").isValid()?i()(e).format("YYYY-MM-DD HH:mm:ss"):e}}}},94667:(e,a,t)=>{t.d(a,{Z:()=>i});var s=t(38561);let i=()=>({findAll:async e=>{let{data:a}=await s.Z.request({url:"/helps",method:"GET",params:e});return a},list:async e=>{let{data:a}=await s.Z.request({url:"/helps/list",method:"GET",params:e});return a},save:async e=>{let{data:a}=await s.Z.request({url:"/helps",method:"POST",data:e});return a},update:async e=>{let{data:a}=await s.Z.request({url:`/helps/${e.id}`,method:"PUT",data:e});return a},remove:async e=>{let{data:a}=await s.Z.request({url:`/helps/${e}`,method:"DELETE"});return a}})},48888:(e,a,t)=>{t.d(a,{Z:()=>i});var s=t(38561);let i=()=>({getPlanList:async e=>{let{data:a}=await s.i.request({url:"/plans/list",method:"GET",params:e});return a},list:async e=>{let{data:a}=await s.Z.request({url:"/plans/all",method:"GET",params:e});return a},save:async e=>{let{data:a}=await s.Z.request({url:"/plans",method:"POST",data:e});return a},update:async e=>{let{data:a}=await s.Z.request({url:`/plans/${e.id}`,method:"PUT",data:e});return a},finder:async e=>{let{data:a}=await s.Z.request({url:`/plans/${e}`,method:"GET"});return a},remove:async e=>{let{data:a}=await s.Z.request({url:`/plans/${e}`,method:"DELETE"});return a}})},98662:(e,a,t)=>{t.d(a,{Z:()=>i});var s=t(38561);let i=()=>({getAll:async e=>{let{data:a}=await s.Z.request({url:"/settings",method:"GET",params:e});return a},update:async e=>{let{data:a}=await s.Z.request({url:`/settings/${e.key}`,method:"PUT",data:e});return a}})},10303:(e,a,t)=>{t.a(e,async(e,s)=>{try{t.r(a),t.d(a,{default:()=>N});var i=t(20997),l=t(16689),n=t(96153),r=t(66276),o=t(2926),c=t(41120),d=t(79895),u=t(57821),m=t(41423),h=t(91903),p=t(74749),x=t(27081),g=t(84405),j=t(48855),f=t(68984),y=t(92921),Z=t(3590),v=t(23703),b=t(85425),S=t(98662),w=t(68620),C=e([x,g,j,f,Z,b]);[x,g,j,f,Z,b]=C.then?(await C)():C;let k=(0,c.Z)(e=>({root:{flex:1,backgroundColor:e.palette.background.paper},mainPaper:{...e.scrollbarStyles,overflowY:"scroll",flex:1},tab:{backgroundColor:e.palette.options,borderRadius:4},paper:{...e.scrollbarStyles,overflowY:"scroll",padding:e.spacing(2),display:"flex",alignItems:"center",width:"100%"},container:{width:"100%",maxHeight:"100%"},control:{padding:e.spacing(1)},textfield:{width:"100%"}})),N=()=>{let e=k(),[a,t]=(0,l.useState)("options"),[s,c]=(0,l.useState)([]),[C,N]=(0,l.useState)({}),[q,D]=(0,l.useState)(!1),[T,A]=(0,l.useState)({}),[I,E]=(0,l.useState)({}),[P,M]=(0,l.useState)(!1),{getCurrentUserInfo:z}=(0,b.Z)(),{find:W,updateSchedules:F}=(0,v.Z)(),{getAll:Y}=(0,S.Z)();(0,l.useEffect)(()=>{(async function(){D(!0);try{let e=localStorage.getItem("companyId"),a=await W(e),t=await Y();if(N(a),c(a.schedules),E(t),Array.isArray(t)){let e=t.find(e=>"scheduleType"===e.key);e&&M("company"===e.value)}let s=await z();A(s)}catch(e){Z.toast.error(e)}D(!1)})()},[]);let O=async e=>{D(!0);try{c(e),await F({id:C.id,schedules:e}),Z.toast.success("Hor\xe1rios atualizados com sucesso.")}catch(e){Z.toast.error(e)}D(!1)};return(0,i.jsxs)(n.Z,{className:e.root,children:[i.jsx(r.Z,{children:i.jsx(o.Z,{children:y.a.t("settings.title")})}),(0,i.jsxs)(d.Z,{className:e.mainPaper,elevation:1,children:[(0,i.jsxs)(u.Z,{value:a,indicatorColor:"primary",textColor:"primary",scrollButtons:"on",variant:"scrollable",onChange:(e,a)=>{(async function(){D(!0);try{let e=localStorage.getItem("companyId"),a=await W(e),t=await Y();if(N(a),c(a.schedules),E(t),Array.isArray(t)){let e=t.find(e=>"scheduleType"===e.key);e&&M("company"===e.value)}let s=await z();A(s)}catch(e){Z.toast.error(e)}D(!1)})(),t(a)},className:e.tab,children:[i.jsx(m.Z,{label:"Op\xe7\xf5es",value:"options"}),P&&i.jsx(m.Z,{label:"Hor\xe1rios",value:"schedules"}),T.super?i.jsx(m.Z,{label:"Empresas",value:"companies"}):null,T.super?i.jsx(m.Z,{label:"Planos",value:"plans"}):null,T.super?i.jsx(m.Z,{label:"Ajuda",value:"helps"}):null]}),(0,i.jsxs)(d.Z,{className:e.paper,elevation:0,children:[i.jsx(h.Z,{className:e.container,value:a,name:"schedules",children:i.jsx(p.Z,{loading:q,onSubmit:O,initialValues:s})}),i.jsx(w.Z,{user:T,yes:()=>i.jsx(h.Z,{className:e.container,value:a,name:"companies",children:i.jsx(x.ZP,{})})}),i.jsx(w.Z,{user:T,yes:()=>i.jsx(h.Z,{className:e.container,value:a,name:"plans",children:i.jsx(g.ZP,{})})}),i.jsx(w.Z,{user:T,yes:()=>i.jsx(h.Z,{className:e.container,value:a,name:"helps",children:i.jsx(j.ZP,{})})}),i.jsx(h.Z,{className:e.container,value:a,name:"options",children:i.jsx(f.Z,{settings:I,scheduleTypeChanged:e=>M("company"===e)})})]})]})]})};s()}catch(e){s(e)}})},12610:e=>{e.exports=require("@material-ui/core/Button")},85798:e=>{e.exports=require("@material-ui/core/Chip")},9069:e=>{e.exports=require("@material-ui/core/CircularProgress")},32705:e=>{e.exports=require("@material-ui/core/Container")},81961:e=>{e.exports=require("@material-ui/core/Dialog")},80929:e=>{e.exports=require("@material-ui/core/DialogActions")},46856:e=>{e.exports=require("@material-ui/core/DialogContent")},82400:e=>{e.exports=require("@material-ui/core/DialogTitle")},75811:e=>{e.exports=require("@material-ui/core/FormControl")},68568:e=>{e.exports=require("@material-ui/core/FormHelperText")},13266:e=>{e.exports=require("@material-ui/core/Grid")},68190:e=>{e.exports=require("@material-ui/core/InputLabel")},48250:e=>{e.exports=require("@material-ui/core/MenuItem")},40640:e=>{e.exports=require("@material-ui/core/Paper")},84614:e=>{e.exports=require("@material-ui/core/Select")},26481:e=>{e.exports=require("@material-ui/core/TextField")},54104:e=>{e.exports=require("@material-ui/core/Typography")},55223:e=>{e.exports=require("@material-ui/core/colors")},48308:e=>{e.exports=require("@material-ui/core/styles")},9371:e=>{e.exports=require("@material-ui/core/utils")},43349:e=>{e.exports=require("@material-ui/styles")},95027:e=>{e.exports=require("@material-ui/system")},23874:e=>{e.exports=require("@material-ui/utils")},52167:e=>{e.exports=require("axios")},68103:e=>{e.exports=require("clsx")},2296:e=>{e.exports=require("formik")},18805:e=>{e.exports=require("i18next")},86071:e=>{e.exports=require("i18next-browser-languagedetector")},98210:e=>{e.exports=require("lodash/has")},56667:e=>{e.exports=require("lodash/head")},35599:e=>{e.exports=require("lodash/isArray")},75795:e=>{e.exports=require("lodash/isObject")},97026:e=>{e.exports=require("lodash/isString")},32245:e=>{e.exports=require("moment")},62785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},580:e=>{e.exports=require("prop-types")},16689:e=>{e.exports=require("react")},39475:e=>{e.exports=require("react-currency-format")},66405:e=>{e.exports=require("react-dom")},24648:e=>{e.exports=require("react-input-mask")},93554:e=>{e.exports=require("react-number-format")},14661:e=>{e.exports=require("react-router-dom")},37597:e=>{e.exports=require("react-text-mask")},84466:e=>{e.exports=require("react-transition-group")},20997:e=>{e.exports=require("react/jsx-runtime")},75609:e=>{e.exports=require("yup")},3590:e=>{e.exports=import("react-toastify")},14612:e=>{e.exports=import("socket.io-client")},71017:e=>{e.exports=require("path")}};var a=require("../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),s=a.X(0,[5388,9908,895,9154,4924,2966,8997,273,5800,4405,1614],()=>t(55730));module.exports=s})();