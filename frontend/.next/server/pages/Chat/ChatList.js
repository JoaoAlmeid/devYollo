"use strict";(()=>{var e={};e.id=3762,e.ids=[3762,660],e.modules={81860:(e,t,r)=>{r.d(t,{Z:()=>u});var a=r(87462),o=r(91),s=r(16689);r(580);var i=r(68103),n=r.n(i),l=r(52543),c=s.forwardRef(function(e,t){var r=e.classes,i=e.className,l=(0,o.Z)(e,["classes","className"]);return s.createElement("div",(0,a.Z)({className:n()(r.root,i),ref:t},l))});c.muiName="ListItemSecondaryAction";let u=(0,l.Z)({root:{position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"}},{name:"MuiListItemSecondaryAction"})(c)},62822:(e,t,r)=>{r.d(t,{Z:()=>d});var a=r(87462),o=r(91),s=r(16689);r(580);var i=r(68103),n=r.n(i),l=r(52543),c=r(66987),u=s.forwardRef(function(e,t){var r=e.children,i=e.classes,l=e.className,u=e.component,d=e.dense,m=void 0!==d&&d,p=e.disablePadding,h=e.subheader,g=(0,o.Z)(e,["children","classes","className","component","dense","disablePadding","subheader"]),f=s.useMemo(function(){return{dense:m}},[m]);return s.createElement(c.Z.Provider,{value:f},s.createElement(void 0===u?"ul":u,(0,a.Z)({className:n()(i.root,l,m&&i.dense,!(void 0!==p&&p)&&i.padding,h&&i.subheader),ref:t},g),h,r))});let d=(0,l.Z)({root:{listStyle:"none",margin:0,padding:0,position:"relative"},padding:{paddingTop:8,paddingBottom:8},dense:{},subheader:{paddingTop:0}},{name:"MuiList"})(u)},66987:(e,t,r)=>{r.d(t,{Z:()=>a});let a=r(16689).createContext({})},62087:(e,t,r)=>{r.d(t,{Z:()=>d});var a=r(87462),o=r(91),s=r(16689);r(580);var i=r(68103),n=r.n(i);r(23874);var l=r(52543),c=r(93871),u=s.forwardRef(function(e,t){var r=e.children,i=e.classes,l=e.className,u=e.color,d=void 0===u?"inherit":u,m=e.component,p=e.fontSize,h=void 0===p?"medium":p,g=e.htmlColor,f=e.titleAccess,x=e.viewBox,y=(0,o.Z)(e,["children","classes","className","color","component","fontSize","htmlColor","titleAccess","viewBox"]);return s.createElement(void 0===m?"svg":m,(0,a.Z)({className:n()(i.root,l,"inherit"!==d&&i["color".concat((0,c.Z)(d))],"default"!==h&&"medium"!==h&&i["fontSize".concat((0,c.Z)(h))]),focusable:"false",viewBox:void 0===x?"0 0 24 24":x,color:g,"aria-hidden":!f||void 0,role:f?"img":void 0,ref:t},y),r,f?s.createElement("title",null,f):null)});u.muiName="SvgIcon";let d=(0,l.Z)(function(e){return{root:{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,fontSize:e.typography.pxToRem(24),transition:e.transitions.create("fill",{duration:e.transitions.duration.shorter})},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorAction:{color:e.palette.action.active},colorError:{color:e.palette.error.main},colorDisabled:{color:e.palette.action.disabled},fontSizeInherit:{fontSize:"inherit"},fontSizeSmall:{fontSize:e.typography.pxToRem(20)},fontSizeLarge:{fontSize:e.typography.pxToRem(35)}}},{name:"MuiSvgIcon"})(u)},63786:(e,t,r)=>{r.d(t,{Z:()=>n});var a=r(87462),o=r(16689),s=r.n(o),i=r(62087);function n(e,t){var r=function(t,r){return s().createElement(i.Z,(0,a.Z)({ref:r},t),e)};return r.muiName=i.Z.muiName,s().memo(s().forwardRef(r))}},83711:(e,t,r)=>{r.d(t,{Z:()=>o});var a=r(16689);function o(e,t){return a.isValidElement(e)&&-1!==t.indexOf(e.type.muiName)}},71199:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{config:()=>x,default:()=>p,getServerSideProps:()=>f,getStaticPaths:()=>g,getStaticProps:()=>h,reportWebVitals:()=>y,routeModule:()=>C,unstable_getServerProps:()=>b,unstable_getServerSideProps:()=>I,unstable_getStaticParams:()=>Z,unstable_getStaticPaths:()=>S,unstable_getStaticProps:()=>v});var o=r(87093),s=r(35244),i=r(1323),n=r(55388),l=r.n(n),c=r(16769),u=r.n(c),d=r(18892),m=e([d]);d=(m.then?(await m)():m)[0];let p=(0,i.l)(d,"default"),h=(0,i.l)(d,"getStaticProps"),g=(0,i.l)(d,"getStaticPaths"),f=(0,i.l)(d,"getServerSideProps"),x=(0,i.l)(d,"config"),y=(0,i.l)(d,"reportWebVitals"),v=(0,i.l)(d,"unstable_getStaticProps"),S=(0,i.l)(d,"unstable_getStaticPaths"),Z=(0,i.l)(d,"unstable_getStaticParams"),b=(0,i.l)(d,"unstable_getServerProps"),I=(0,i.l)(d,"unstable_getServerSideProps"),C=new o.PagesRouteModule({definition:{kind:s.x.PAGES,page:"/Chat/ChatList",pathname:"/Chat/ChatList",bundlePath:"",filename:""},components:{App:u(),Document:l()},userland:d});a()}catch(e){a(e)}})},6133:(e,t,r)=>{r.d(t,{Z:()=>x});var a=r(20997);r(16689);var o=r(12610),s=r.n(o),i=r(81961),n=r.n(i),l=r(80929),c=r.n(l),u=r(46856),d=r.n(u),m=r(82400),p=r.n(m),h=r(54104),g=r.n(h),f=r(92921);let x=({title:e,children:t,open:r,onClose:o,onConfirm:i})=>(0,a.jsxs)(n(),{open:r,onClose:()=>o(!1),"aria-labelledby":"confirm-dialog",children:[a.jsx(p(),{id:"confirm-dialog",children:e}),a.jsx(d(),{dividers:!0,children:a.jsx(g(),{children:t})}),(0,a.jsxs)(c(),{children:[a.jsx(s(),{variant:"contained",onClick:()=>o(!1),color:"default",children:f.a.t("confirmationModal.buttons.cancel")}),a.jsx(s(),{variant:"contained",onClick:()=>{o(!1),i()},color:"secondary",children:f.a.t("confirmationModal.buttons.confirm")})]})]})},58582:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.d(t,{V:()=>n}),r(20997);var o=r(16689),s=r(85425),i=e([s]);s=(i.then?(await i)():i)[0];let n=(0,o.createContext)();a()}catch(e){a(e)}})},151:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.d(t,{Z:()=>c});var o=r(3590),s=r(92921),i=r(97026),n=r.n(i),l=e([o]);o=(l.then?(await l)():l)[0];let c=e=>{let t=e.response?.data?.error;if(t){if(s.a.exists(`backendErrors.${t}`)){o.toast.error(s.a.t(`backendErrors.${t}`),{toastId:t,autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!0,progress:void 0,theme:"light"});return}o.toast.error(t,{toastId:t,autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!0,progress:void 0,theme:"light"});return}if(n()(e)){o.toast.error(e);return}o.toast.error("An error occurred!")};a()}catch(e){a(e)}})},85425:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.d(t,{Z:()=>y});var o=r(16689),s=r(14661),i=r(98210),n=r.n(i),l=r(35599),c=r.n(l),u=r(3590),d=r(92921),m=r(38561),p=r(151),h=r(7405),g=r(32245),f=r.n(g),x=e([u,p,h]);[u,p,h]=x.then?(await x)():x;let y=()=>{let e=(0,s.useNavigate)(),[t,r]=(0,o.useState)(!1),[a,i]=(0,o.useState)(!0),[l,g]=(0,o.useState)({});m.Z.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${JSON.parse(t)}`,r(!0)),e},e=>{Promise.reject(e)}),m.Z.interceptors.response.use(e=>e,async e=>{let t=e.config;if(e?.response?.status===403&&!t._retry){t._retry=!0;let{data:e}=await m.Z.post("/auth/refresh_token");return e&&(localStorage.setItem("token",JSON.stringify(e.token)),m.Z.defaults.headers.Authorization=`Bearer ${e.token}`),(0,m.Z)(t)}return e?.response?.status===401&&(localStorage.removeItem("token"),localStorage.removeItem("companyId"),m.Z.defaults.headers.Authorization=void 0,r(!1)),Promise.reject(e)}),(0,o.useEffect)(()=>{let e=localStorage.getItem("token");(async()=>{if(e)try{let{data:e}=await m.Z.post("/auth/refresh_token");m.Z.defaults.headers.Authorization=`Bearer ${e.token}`,r(!0),g(e.user)}catch(e){(0,p.Z)(e)}i(!1)})()},[]),(0,o.useEffect)(()=>{let e=localStorage.getItem("companyId");if(e){let t=(0,h.C)({companyId:e});return t.on(`company-${e}-user`,e=>{"update"===e.action&&e.user.id===l.id&&g(e.user)}),()=>{t.disconnect()}}},[l]);let x=async t=>{i(!0);try{let{data:l}=await m.Z.post("/auth/login",t),{user:{companyId:h,id:x,company:y}}=l;if(n()(y,"settings")&&c()(y.settings)){let e=y.settings.find(e=>"campaignsEnabled"===e.key);e&&"true"===e.value&&localStorage.setItem("cshow",null)}f().locale("pt-br");let v=l.user.company.dueDate;f()(f()()).format("DD/MM/yyyy");let S=f()(v).format("DD/MM/yyyy");var a=f()(v).diff(f()(f()()).format()),o=f()(f()().format()).isBefore(v),s=f().duration(a).asDays();!0===o?(localStorage.setItem("token",JSON.stringify(l.token)),localStorage.setItem("companyId",h),localStorage.setItem("userId",x),localStorage.setItem("companyDueDate",S),m.Z.defaults.headers.Authorization=`Bearer ${l.token}`,g(l.user),r(!0),u.toast.success(d.a.t("auth.toasts.success")),5>Math.round(s)&&u.toast.warn(`Sua assinatura vence em ${Math.round(s)} ${1===Math.round(s)?"dia":"dias"} `),e.push("/tickets")):(0,p.Z)(`Opss! Sua assinatura venceu ${S}.
Entre em contato com o Suporte para mais informa\xe7\xf5es! `),i(!1)}catch(e){(0,p.Z)(e),i(!1)}},y=async()=>{i(!0);try{await m.Z.delete("/auth/logout"),r(!1),g({}),localStorage.removeItem("token"),localStorage.removeItem("companyId"),localStorage.removeItem("userId"),localStorage.removeItem("cshow"),m.Z.defaults.headers.Authorization=void 0,i(!1),e.push("/login")}catch(e){(0,p.Z)(e),i(!1)}},v=async()=>{try{let{data:e}=await m.Z.get("/auth/me");return e}catch(e){(0,p.Z)(e)}};return{isAuth:t,user:l,loading:a,handleLogin:x,handleLogout:y,getCurrentUserInfo:v}};a()}catch(e){a(e)}})},74846:(e,t,r)=>{r.d(t,{Y:()=>s});var a=r(32245),o=r.n(a);function s(){return{dateToClient:function(e){return o()(e).isValid()?o()(e).format("DD/MM/YYYY"):e},datetimeToClient:function(e){return o()(e).isValid()?o()(e).format("DD/MM/YYYY HH:mm"):e},dateToDatabase:function(e){return o()(e,"DD/MM/YYYY").isValid()?o()(e).format("YYYY-MM-DD HH:mm:ss"):e}}}},18892:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{default:()=>I});var o=r(20997),s=r(16689),i=r(41120),n=r(16204),l=r(62822),c=r(50998),u=r(95757),d=r(81860),m=r(17812),p=r(14661),h=r(58582),g=r(74846),f=r(15652),x=r.n(f),y=r(93365),v=r.n(y),S=r(6133),Z=r(38561),b=e([h]);h=(b.then?(await b)():b)[0];let C=(0,i.Z)(e=>({mainContainer:{display:"flex",flexDirection:"column",position:"relative",flex:1,height:"calc(100% - 58px)",overflow:"hidden",borderRadius:0,backgroundColor:e.palette.boxlist},chatList:{display:"flex",flexDirection:"column",position:"relative",flex:1,overflowY:"scroll",...e.scrollbarStyles},listItem:{cursor:"pointer"}}));function I({chats:e,handleSelectChat:t,handleDeleteChat:r,handleEditChat:a,pageInfo:i,loading:f}){let y=C(),b=(0,p.useNavigate)(),{user:I}=(0,s.useContext)(h.V),{datetimeToClient:k}=(0,g.Y)(),[q,w]=(0,s.useState)(!1),[P,j]=(0,s.useState)({}),{id:D}=(0,p.useParams)(),M=async e=>{if(A(e)>0)try{await Z.Z.post(`/chats/${e.id}/read`,{userId:I.id})}catch(e){}D!==e.uuid&&(b.push(`/chats/${e.uuid}`),t(e))},A=e=>e.users.find(e=>e.userId===I.id).unreads,N=e=>{let t=e.title,r=A(e);return(0,o.jsxs)(o.Fragment,{children:[t,r>0&&o.jsx(n.Z,{size:"small",style:{marginLeft:5},label:r,color:"secondary"})]})},E=e=>""!==e.lastMessage?`${k(e.updatedAt)}: ${e.lastMessage}`:"",Y=e=>({borderLeft:e.uuid===D?"6px solid #002d6e":null,backgroundColor:e.uuid===D?"theme.palette.chatlist":null});return(0,o.jsxs)(o.Fragment,{children:[o.jsx(S.Z,{title:"Excluir Conversa",open:q,onClose:w,onConfirm:()=>{r(P)},children:"Esta a\xe7\xe3o n\xe3o pode ser revertida, confirmar?"}),o.jsx("div",{className:y.mainContainer,children:o.jsx("div",{className:y.chatList,children:o.jsx(l.Z,{children:Array.isArray(e)&&e.length>0&&e.map((e,t)=>(0,o.jsxs)(c.Z,{onClick:()=>M(e),className:y.listItem,style:Y(e),button:!0,children:[o.jsx(u.Z,{primary:N(e),secondary:E(e)}),e.ownerId===I.id&&(0,o.jsxs)(d.Z,{children:[o.jsx(m.Z,{onClick:()=>{M(e).then(()=>{a(e)})},edge:"end","aria-label":"delete",size:"small",style:{marginRight:5},children:o.jsx(v(),{})}),o.jsx(m.Z,{onClick:()=>{j(e),w(!0)},edge:"end","aria-label":"delete",size:"small",children:o.jsx(x(),{})})]})]},t))})})})]})}a()}catch(e){a(e)}})},7405:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.d(t,{C:()=>l});var o=r(14612),s=r(75795),i=r.n(s),n=e([o]);function l(e){return localStorage.getItem("userId")&&localStorage.getItem("userId"),(0,o.default)(process.env.REACT_APP_BACKEND_URL,{transports:["websocket","polling","flashsocket"],pingTimeout:18e3,pingInterval:18e3,query:i()(e)?{...e}:{userId:e.userId}})}o=(n.then?(await n)():n)[0],a()}catch(e){a(e)}})},12610:e=>{e.exports=require("@material-ui/core/Button")},81961:e=>{e.exports=require("@material-ui/core/Dialog")},80929:e=>{e.exports=require("@material-ui/core/DialogActions")},46856:e=>{e.exports=require("@material-ui/core/DialogContent")},82400:e=>{e.exports=require("@material-ui/core/DialogTitle")},54104:e=>{e.exports=require("@material-ui/core/Typography")},15652:e=>{e.exports=require("@material-ui/icons/Delete")},93365:e=>{e.exports=require("@material-ui/icons/Edit")},43349:e=>{e.exports=require("@material-ui/styles")},95027:e=>{e.exports=require("@material-ui/system")},23874:e=>{e.exports=require("@material-ui/utils")},52167:e=>{e.exports=require("axios")},68103:e=>{e.exports=require("clsx")},18805:e=>{e.exports=require("i18next")},86071:e=>{e.exports=require("i18next-browser-languagedetector")},98210:e=>{e.exports=require("lodash/has")},35599:e=>{e.exports=require("lodash/isArray")},75795:e=>{e.exports=require("lodash/isObject")},97026:e=>{e.exports=require("lodash/isString")},32245:e=>{e.exports=require("moment")},62785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},580:e=>{e.exports=require("prop-types")},16689:e=>{e.exports=require("react")},66405:e=>{e.exports=require("react-dom")},14661:e=>{e.exports=require("react-router-dom")},84466:e=>{e.exports=require("react-transition-group")},20997:e=>{e.exports=require("react/jsx-runtime")},3590:e=>{e.exports=import("react-toastify")},14612:e=>{e.exports=import("socket.io-client")},71017:e=>{e.exports=require("path")}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[5388,9908,895,4146,4542,5800],()=>r(71199));module.exports=a})();