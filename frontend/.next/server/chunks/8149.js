"use strict";exports.id=8149,exports.ids=[8149],exports.modules={92300:(e,t,a)=>{a.d(t,{Z:()=>n});let n={src:"/_next/static/media/logo.7b4d1abf.png",height:156,width:584,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAYAAABllJ3tAAAATUlEQVR4nGM0qbiRysjMYf5s4+nV7AqiMr9+M/zkZPkvGKX74PvWO/I3GBWTzzt+Z+WX4r98/uwPPiFRrn/v/zEz/uMJ0Xz6d9cd/tsAm84dyxJGXe8AAAAASUVORK5CYII=",blurWidth:8,blurHeight:2}},79275:(e,t,a)=>{a.d(t,{Z:()=>n});let n={src:"/_next/static/media/wa-background-dark.4b72ea47.png",height:981,width:540,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAICAYAAADeM14FAAAAEklEQVR4nGP89+8fEwMSGCABAPXWF+ncBQ5pAAAAAElFTkSuQmCC",blurWidth:4,blurHeight:8}},61613:(e,t,a)=>{a.d(t,{Z:()=>n});let n={src:"/_next/static/media/wa-background.947abd15.png",height:1396,width:760,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAIAgMAAACjXbaWAAAADFBMVEXj29Pi29Pi2tPi2tJSYjZhAAAAGElEQVR42mPYwfCfYQEDGwMXAwfDGgYGACFTAxy+eyW6AAAAAElFTkSuQmCC",blurWidth:4,blurHeight:8}},74504:(e,t,a)=>{a.d(t,{Z:()=>u});var n=a(20997);a(16689);var i=a(44164),s=a.n(i),r=a(54104),l=a.n(r),o=a(40640),d=a.n(o),c=a(92921),m=a(41749);let u=({classes:e})=>(0,n.jsxs)("div",{className:e.content,children:[n.jsx(d(),{square:!0,variant:"outlined",className:e.contactHeader,children:(0,n.jsxs)(m.Z,{container:!0,children:[n.jsx(m.Z,{item:!0,children:n.jsx(s(),{animation:"wave",variant:"circle",width:60,height:60,className:e.contactAvatar})}),(0,n.jsxs)(m.Z,{item:!0,children:[n.jsx(s(),{animation:"wave",height:25,width:90}),n.jsx(s(),{animation:"wave",height:25,width:80}),n.jsx(s(),{animation:"wave",height:25,width:80})]})]})}),(0,n.jsxs)(d(),{square:!0,className:e.contactDetails,children:[n.jsx(l(),{variant:"subtitle1",children:c.a.t("contactDrawer.extraInfo")}),(0,n.jsxs)(d(),{square:!0,variant:"outlined",className:e.contactExtraInfo,children:[n.jsx(s(),{animation:"wave",height:20,width:60}),n.jsx(s(),{animation:"wave",height:20,width:160})]}),(0,n.jsxs)(d(),{square:!0,variant:"outlined",className:e.contactExtraInfo,children:[n.jsx(s(),{animation:"wave",height:20,width:60}),n.jsx(s(),{animation:"wave",height:20,width:160})]}),(0,n.jsxs)(d(),{square:!0,variant:"outlined",className:e.contactExtraInfo,children:[n.jsx(s(),{animation:"wave",height:20,width:60}),n.jsx(s(),{animation:"wave",height:20,width:160})]})]})]})},57507:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.d(t,{Z:()=>q});var i=a(20997),s=a(16689),r=a(48308),l=a(54104),o=a.n(l),d=a(83974),c=a.n(d),m=a(17501),u=a.n(m),p=a(95555),h=a.n(p),g=a(61132),x=a.n(g),f=a(68190),j=a.n(f),y=a(2098),b=a.n(y),v=a(12610),w=a.n(v),Z=a(40640),k=a.n(Z),S=a(4839),A=a.n(S),C=a(92921),M=a(74504),T=a(40087),I=a(94697),N=a(41683),R=a(15928),E=a(37699),W=e([T,N,R,E]);[T,N,R,E]=W.then?(await W)():W;let L=(0,r.makeStyles)(e=>({drawer:{width:320,flexShrink:0},drawerPaper:{width:320,display:"flex",borderTop:"1px solid rgba(0, 0, 0, 0.12)",borderRight:"1px solid rgba(0, 0, 0, 0.12)",borderBottom:"1px solid rgba(0, 0, 0, 0.12)",borderTopRightRadius:4,borderBottomRightRadius:4},header:{display:"flex",borderBottom:"1px solid rgba(0, 0, 0, 0.12)",backgroundColor:e.palette.contactdrawer,alignItems:"center",padding:e.spacing(0,1),minHeight:"73px",justifyContent:"flex-start"},content:{display:"flex",backgroundColor:e.palette.contactdrawer,flexDirection:"column",padding:"8px 0px 8px 8px",height:"100%",overflowY:"scroll",...e.scrollbarStyles},contactAvatar:{margin:15,width:100,height:100},contactHeader:{display:"flex",padding:8,flexDirection:"column",alignItems:"center",justifyContent:"center","& > *":{margin:4}},contactDetails:{marginTop:8,padding:8,display:"flex",flexDirection:"column"},contactExtraInfo:{marginTop:4,padding:6}})),q=({open:e,handleDrawerClose:t,contact:a,ticket:n,loading:r})=>{let l=L(),[d,m]=(0,s.useState)(!1),[p,g]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{g(!1)},[e,a]),i.jsx(i.Fragment,{children:(0,i.jsxs)(h(),{className:l.drawer,variant:"persistent",anchor:"right",open:e,PaperProps:{style:{position:"absolute"}},BackdropProps:{style:{position:"absolute"}},ModalProps:{container:document.getElementById("drawer-container"),style:{position:"absolute"}},classes:{paper:l.drawerPaper},children:[(0,i.jsxs)("div",{className:l.header,children:[i.jsx(c(),{onClick:t,children:i.jsx(u(),{})}),i.jsx(o(),{style:{justifySelf:"center"},children:C.a.t("contactDrawer.header")})]}),r?i.jsx(M.Z,{classes:l}):(0,i.jsxs)("div",{className:l.content,children:[(0,i.jsxs)(k(),{square:!0,variant:"outlined",className:l.contactHeader,children:[i.jsx(I.Z,{onClick:()=>{},style:{cursor:"pointer",width:"100%"},titleTypographyProps:{noWrap:!0},subheaderTypographyProps:{noWrap:!0},avatar:i.jsx(b(),{src:a.profilePicUrl,alt:"contact_image",style:{width:60,height:60}}),title:i.jsx(i.Fragment,{children:(0,i.jsxs)(o(),{onClick:()=>g(!0),children:[a.name,i.jsx(A(),{style:{fontSize:16,marginLeft:5}})]})}),subheader:(0,i.jsxs)(i.Fragment,{children:[i.jsx(o(),{style:{fontSize:12},children:i.jsx(x(),{href:`tel:${a.number}`,children:a.number})}),i.jsx(o(),{style:{fontSize:12},children:i.jsx(x(),{href:`mailto:${a.email}`,children:a.email})})]})}),i.jsx(w(),{variant:"outlined",color:"primary",onClick:()=>m(!p),style:{fontSize:12},children:C.a.t("contactDrawer.buttons.edit")}),a.id&&p&&i.jsx(N.t,{initialContact:a,onCancel:()=>g(!1)})]}),(0,i.jsxs)(k(),{square:!0,variant:"outlined",className:l.contactDetails,children:[i.jsx(o(),{variant:"subtitle1",style:{marginBottom:10},children:C.a.t("ticketOptionsMenu.appointmentsModal.title")}),i.jsx(E.W,{ticket:n})]}),(0,i.jsxs)(k(),{square:!0,variant:"outlined",className:l.contactDetails,children:[i.jsx(R.Z,{open:d,onClose:()=>m(!1),contactId:a.id}),i.jsx(o(),{variant:"subtitle1",children:C.a.t("contactDrawer.extraInfo")}),a?.extraInfo?.map(e=>i.jsxs(k(),{square:!0,variant:"outlined",className:l.contactExtraInfo,children:[i.jsx(j(),{children:e.name}),i.jsx(o(),{component:"div",noWrap:!0,style:{paddingTop:2},children:i.jsx(T.Z,{children:e.value})})]},e.id))]})]})]})})};n()}catch(e){n(e)}})},41683:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.d(t,{t:()=>w});var i=a(20997),s=a(16689),r=a(75609),l=a(2296),o=a(3590),d=a(48308),c=a(55223),m=a(12610),u=a.n(m),p=a(26481),h=a.n(p),g=a(9069),x=a.n(g),f=a(92921),j=a(38561),y=a(151),b=a(41749),v=e([o,y]);[o,y]=v.then?(await v)():v;let Z=(0,d.makeStyles)(e=>({root:{display:"flex",flexWrap:"wrap"},textField:{marginRight:e.spacing(1),flex:1},extraAttr:{display:"flex",justifyContent:"center",alignItems:"center"},btnWrapper:{position:"relative"},buttonProgress:{color:c.green[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},textCenter:{backgroundColor:"red"}})),k=r.object().shape({name:r.string().min(2,"Too Short!").max(50,"Too Long!").required("Required"),number:r.string().min(8,"Too Short!").max(50,"Too Long!"),email:r.string().email("Invalid email")});function w({initialContact:e,onSave:t,onCancel:a}){let n=Z(),[r,d]=(0,s.useState)(e);(0,s.useEffect)(()=>{d(e)},[e]);let c=async e=>{try{if(r.id)await j.Z.put(`/contacts/${r.id}`,e);else{let{data:a}=await j.Z.post("/contacts",e);t&&t(a)}o.toast.success(f.a.t("contactModal.success"))}catch(e){(0,y.Z)(e)}};return i.jsx(l.Formik,{initialValues:r,enableReinitialize:!0,validationSchema:k,onSubmit:(e,t)=>{setTimeout(()=>{c(e),t.setSubmitting(!1)},400)},children:({values:e,errors:t,touched:s,isSubmitting:o})=>i.jsx(l.Form,{children:(0,i.jsxs)(b.Z,{container:!0,spacing:1,children:[i.jsx(b.Z,{item:!0,xs:12,children:i.jsx(l.Field,{as:h(),label:f.a.t("contactModal.form.name"),name:"name",autoFocus:!0,error:s.name&&!!t.name,helperText:s.name&&t.name,variant:"outlined",margin:"dense",className:n.textField,fullWidth:!0})}),i.jsx(b.Z,{item:!0,xs:12,children:i.jsx(l.Field,{as:h(),label:f.a.t("contactModal.form.number"),name:"number",error:s.number&&!!t.number,helperText:s.number&&t.number,placeholder:"5513912344321",variant:"outlined",margin:"dense",fullWidth:!0})}),i.jsx(b.Z,{item:!0,xs:12,children:i.jsx(l.Field,{as:h(),label:f.a.t("contactModal.form.email"),name:"email",error:s.email&&!!t.email,helperText:s.email&&t.email,placeholder:"Email address",fullWidth:!0,margin:"dense",variant:"outlined"})}),i.jsx(b.Z,{item:!0,xs:12,spacing:1,children:(0,i.jsxs)(b.Z,{container:!0,spacing:1,children:[i.jsx(b.Z,{xs:6,item:!0,children:i.jsx(u(),{onClick:a,color:"secondary",disabled:o,variant:"outlined",fullWidth:!0,children:f.a.t("contactModal.buttons.cancel")})}),i.jsx(b.Z,{classes:n.textCenter,xs:6,item:!0,children:(0,i.jsxs)(u(),{type:"submit",color:"primary",disabled:o,variant:"contained",className:n.btnWrapper,fullWidth:!0,children:[r.id?`${f.a.t("contactModal.buttons.okEdit")}`:`${f.a.t("contactModal.buttons.okAdd")}`,o&&i.jsx(x(),{size:24,className:n.buttonProgress})]})})]})})]})})})}n()}catch(e){n(e)}})},91442:(e,t,a)=>{a.d(t,{Z:()=>A});var n=a(20997);a(16689);var i=a(580),s=a.n(i),r=a(83974),l=a.n(r),o=a(26256),d=a.n(o),c=a(45168),m=a.n(c),u=a(30774),p=a.n(u),h=a(57051),g=a.n(h),x=a(2098),f=a.n(x),j=a(54104),y=a.n(j),b=a(48308),v=a(15652),w=a.n(v),Z=a(32245),k=a.n(Z);let S=(0,b.makeStyles)(e=>({inline:{width:"100%"}}));function A(e){let{note:t,deleteItem:a}=e,i=S(),s=e=>{a(e)};return(0,n.jsxs)(d(),{alignItems:"flex-start",children:[n.jsx(p(),{children:n.jsx(f(),{alt:t.user.name,src:"/static/images/avatar/1.jpg"})}),n.jsx(m(),{primary:n.jsx(n.Fragment,{children:n.jsx(y(),{component:"span",variant:"body2",className:i.inline,color:"textPrimary",children:t.note})}),secondary:(0,n.jsxs)(n.Fragment,{children:[t.user.name,", ",k()(t.createdAt).format("DD/MM/YY HH:mm")]})}),n.jsx(g(),{children:n.jsx(l(),{onClick:()=>s(t),edge:"end","aria-label":"delete",children:n.jsx(w(),{})})})]})}A.propTypes={note:s().object.isRequired,deleteItem:s().func.isRequired}},37699:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.d(t,{W:()=>Z});var i=a(20997),s=a(16689),r=a(12610),l=a.n(r),o=a(26481),d=a.n(o),c=a(65031),m=a.n(c),u=a(48308),p=a(75609),h=a(2296),g=a(91442),x=a(6133),f=a(3590),j=a(92921),y=a(79213),b=a(24497),v=a(41749),w=e([f]);f=(w.then?(await w)():w)[0];let k=(0,u.makeStyles)(e=>({root:{"& .MuiTextField-root":{margin:e.spacing(1),width:"350px"}},list:{width:"100%",maxWidth:"350px",maxHeight:"200px",backgroundColor:e.palette.background.paper,overflow:"auto"},inline:{width:"100%"}})),S=p.object().shape({note:p.string().min(2,"Too Short!").required("Required")});function Z({ticket:e}){let{id:t,contactId:a}=e,n=k(),[r,o]=(0,s.useState)({note:""}),[c,u]=(0,s.useState)(!1),[p,w]=(0,s.useState)(!1),[Z,A]=(0,s.useState)({}),[C,M]=(0,s.useState)([]),{saveNote:T,deleteNote:I,listNotes:N}=(0,b.Z)();(0,s.useEffect)(()=>{(async function(){R(),await D()})()},[]);let R=()=>{o({note:""}),u(!1)},E=e=>{o({note:e.target.value})},W=async e=>{u(!0);try{await T({...e,ticketId:t,contactId:a}),await D(),o({note:""}),f.toast.success("Observa\xe7\xe3o adicionada com sucesso!")}catch(e){f.toast.error(e)}u(!1)},L=e=>{A(e),w(!0)},q=async()=>{u(!0);try{await I(Z.id),await D(),A({}),f.toast.success("Observa\xe7\xe3o exclu\xedda com sucesso!")}catch(e){f.toast.error(e)}u(!1)},D=async()=>{u(!0);try{let e=await N({ticketId:t,contactId:a});M(e)}catch(e){f.toast.error(e)}u(!1)},F=()=>C.map(e=>i.jsx(g.Z,{note:e,deleteItem:L},e.id));return(0,i.jsxs)(i.Fragment,{children:[i.jsx(x.Z,{title:"Excluir Registro",open:p,onClose:w,onConfirm:q,children:"Deseja realmente excluir este registro?"}),i.jsx(h.Formik,{initialValues:r,enableReinitialize:!0,validationSchema:S,onSubmit:(e,t)=>{setTimeout(()=>{W(e),t.setSubmitting(!1)},400)},children:({touched:e,errors:t,setErrors:a})=>i.jsx(h.Form,{children:(0,i.jsxs)(v.Z,{container:!0,spacing:2,children:[i.jsx(v.Z,{xs:12,item:!0,children:i.jsx(h.Field,{as:d(),name:"note",rows:3,label:j.a.t("ticketOptionsMenu.appointmentsModal.textarea"),placeholder:j.a.t("ticketOptionsMenu.appointmentsModal.placeholder"),multiline:!0,error:e.note&&!!t.note,helperText:e.note&&t.note,variant:"outlined",onChange:E,fullWidth:!0})}),C.length>0&&i.jsx(v.Z,{xs:12,item:!0,children:i.jsx(m(),{className:n.list,children:F()})}),i.jsx(v.Z,{xs:12,item:!0,children:(0,i.jsxs)(v.Z,{container:!0,spacing:2,children:[i.jsx(v.Z,{xs:6,item:!0,children:i.jsx(l(),{onClick:()=>{o(""),a({})},color:"primary",variant:"outlined",fullWidth:!0,children:"Cancelar"})}),i.jsx(v.Z,{xs:6,item:!0,children:i.jsx(y.Z,{loading:c,color:"primary",type:"submit",variant:"contained",autoFocus:!0,fullWidth:!0,children:"Salvar"})})]})})]})})})]})}n()}catch(e){n(e)}})},55403:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.d(t,{Z:()=>m});var i=a(20997),s=a(16689),r=a(151),l=a(22318),o=a(55517),d=a(282),c=e([r]);r=(c.then?(await c)():c)[0];let m=({image:e,link:t,description:a})=>{(0,s.useEffect)(()=>{},[e,t,a]);let n=async()=>{try{window.open(t)}catch(e){(0,r.Z)(e)}};return i.jsx(i.Fragment,{children:i.jsx("div",{style:{minWidth:"250px"},children:(0,i.jsxs)("div",{children:[i.jsx("div",{style:{float:"left"},children:i.jsx("img",{src:e,alt:"loc",onClick:n,style:{width:"100px"}})}),a&&i.jsx("div",{style:{display:"flex",flexWrap:"wrap"},children:i.jsx(l.Z,{style:{marginTop:"12px",marginLeft:"15px",marginRight:"15px",float:"left"},variant:"subtitle1",color:"primary",gutterBottom:!0,children:i.jsx("div",{dangerouslySetInnerHTML:{__html:a.replace("\\n","<br />")}})})}),i.jsx("div",{style:{display:"block",content:"",clear:"both"}}),(0,i.jsxs)("div",{children:[i.jsx(o.Z,{}),i.jsx(d.Z,{fullWidth:!0,color:"primary",onClick:n,disabled:!t,children:"Visualizar"})]})]})})})};n()}catch(e){n(e)}})},40087:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.d(t,{Z:()=>u});var i=a(20997),s=a(16689),r=a.n(s),l=a(9832),o=e([l]);l=(o.then?(await o)():o)[0];let d=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],c=["a","b","strong","em","u","code","del"],m=({children:e,...t})=>i.jsx("a",{...t,target:"_blank",rel:"noopener noreferrer",children:e}),u=({children:e})=>{let t=/\*(.*?)\*/g,a=/~(.*?)~/g;e&&t.test(e)&&(e=e.replace(t,"**$1**")),e&&a.test(e)&&(e=e.replace(a,"~~$1~~"));let n=r().useMemo(()=>{let e={disableParsingRawHTML:!0,forceInline:!0,overrides:{a:{component:m}}};return d.forEach(t=>{c.includes(t)||(e.overrides[t]=e=>e.children||null)}),e},[]);return e?i.jsx(l.default,{options:n,children:e}):null};n()}catch(e){n(e)}})},44956:(e,t,a)=>{a.d(t,{Z:()=>r});var n=a(20997),i=a(16689);let s=(0,a(48308).makeStyles)(e=>({timerBox:{display:"flex",marginLeft:10,marginRight:10,alignItems:"center"}})),r=()=>{let e=s(),[t,a]=(0,i.useState)({minutes:0,seconds:0});(0,i.useEffect)(()=>{let e=setInterval(()=>a(e=>59===e.seconds?{...e,minutes:e.minutes+1,seconds:0}:{...e,seconds:e.seconds+1}),1e3);return()=>{clearInterval(e)}},[]);let r=e=>e<10?"0"+e:e;return n.jsx("div",{className:e.timerBox,children:n.jsx("span",{children:`${r(t.minutes)}:${r(t.seconds)}`})})}},56744:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.d(t,{Z:()=>ep});var i=a(20997),s=a(16689),r=a(64175),l=a.n(r);a(91107);var o=a(7791),d=a(40484),c=a.n(d),m=a(68103),u=a.n(m),p=a(48308),h=a(40640),g=a.n(h),x=a(87924),f=a.n(x),j=a(9069),y=a.n(j),b=a(55223),v=a(11277),w=a.n(v),Z=a(83974),k=a.n(Z),S=a(84714),A=a.n(S),C=a(4662),M=a.n(C),T=a(50090),I=a.n(T),N=a(36617),R=a.n(N),E=a(42038),W=a.n(E),L=a(27437),q=a.n(L),D=a(79175),F=a.n(D),O=a(30553),B=a(9570),P=a(88129),$=a.n(P),z=a(97026),H=a.n(z),U=a(89699),G=a.n(U),V=a(75795),_=a.n(V),Y=a(98210),Q=a.n(Y),J=a(92921),X=a(38561),K=a(44956),ee=a(41447),et=a(58582),ea=a(75542),en=a(151),ei=a(31871),es=e([et,ea,en]);[et,ea,en]=es.then?(await es)():es;let er=new(c())({bitRate:128}),el=(0,p.makeStyles)(e=>({mainWrapper:{backgroundColor:e.palette.bordabox,display:"flex",flexDirection:"column",alignItems:"center",borderTop:"1px solid rgba(0, 0, 0, 0.12)"},newMessageBox:{backgroundColor:e.palette.newmessagebox,width:"100%",display:"flex",padding:"7px",alignItems:"center"},messageInputWrapper:{padding:6,marginRight:7,backgroundColor:e.palette.inputdigita,display:"flex",borderRadius:20,flex:1},messageInput:{paddingLeft:10,flex:1,border:"none"},sendMessageIcons:{color:"grey"},uploadInput:{display:"none"},viewMediaInputWrapper:{display:"flex",padding:"10px 13px",position:"relative",justifyContent:"space-between",alignItems:"center",backgroundColor:"#eee",borderTop:"1px solid rgba(0, 0, 0, 0.12)"},emojiBox:{position:"absolute",bottom:63,width:40,borderTop:"1px solid #e8e8e8"},circleLoading:{color:b.green[500],opacity:"70%",position:"absolute",top:"20%",left:"50%",marginLeft:-12},audioLoading:{color:b.green[500],opacity:"70%"},recorderWrapper:{display:"flex",alignItems:"center",alignContent:"middle"},cancelAudioIcon:{color:"red"},sendAudioIcon:{color:"green"},replyginMsgWrapper:{display:"flex",width:"100%",alignItems:"center",justifyContent:"center",paddingTop:8,paddingLeft:73,paddingRight:7},replyginMsgContainer:{flex:1,marginRight:5,overflowY:"hidden",backgroundColor:"rgba(0, 0, 0, 0.05)",borderRadius:"7.5px",display:"flex",position:"relative"},replyginMsgBody:{padding:10,height:"auto",display:"block",whiteSpace:"pre-wrap",overflow:"hidden"},replyginContactMsgSideColor:{flex:"none",width:"4px",backgroundColor:"#35cd96"},replyginSelfMsgSideColor:{flex:"none",width:"4px",backgroundColor:"#6bcbef"},messageContactName:{display:"flex",color:"#6bcbef",fontWeight:500}})),eo=e=>{let{disabled:t,showEmoji:a,setShowEmoji:n,handleAddEmoji:s}=e,r=el();return(0,i.jsxs)(i.Fragment,{children:[i.jsx(k(),{"aria-label":"emojiPicker",component:"span",disabled:t,onClick:e=>n(e=>!e),children:i.jsx(A(),{className:r.sendMessageIcons})}),a?i.jsx("div",{className:r.emojiBox,children:i.jsx(o.Picker,{perLine:16,showPreview:!1,showSkinTones:!1,onSelect:s})}):null]})},ed=e=>{let{width:t,setSignMessage:a,signMessage:n}=e;return(0,r.isWidthUp)("md",t)?i.jsx(O.Z,{style:{marginRight:7,color:"gray"},label:J.a.t("messagesInput.signMessage"),labelPlacement:"start",control:i.jsx(B.Z,{size:"small",checked:n,onChange:e=>{a(e.target.checked)},name:"showAllTickets",color:"primary"})}):null},ec=e=>{let{handleChangeMedias:t,disableOption:a}=e,n=el();return(0,i.jsxs)(i.Fragment,{children:[i.jsx("input",{multiple:!0,type:"file",id:"upload-button",disabled:a(),className:n.uploadInput,onChange:t}),i.jsx("label",{htmlFor:"upload-button",children:i.jsx(k(),{"aria-label":"upload",component:"span",disabled:a(),children:i.jsx(w(),{className:n.sendMessageIcons})})})]})},em=e=>{let{inputMessage:t,loading:a,recording:n,ticketStatus:s,handleSendMessage:r,handleCancelAudio:l,handleUploadAudio:o,handleStartRecording:d}=e,c=el();return t?i.jsx(k(),{"aria-label":"sendMessage",component:"span",onClick:r,disabled:a,children:i.jsx(M(),{className:c.sendMessageIcons})}):n?(0,i.jsxs)("div",{className:c.recorderWrapper,children:[i.jsx(k(),{"aria-label":"cancelRecording",component:"span",fontSize:"large",disabled:a,onClick:l,children:i.jsx(F(),{className:c.cancelAudioIcon})}),a?i.jsx("div",{children:i.jsx(y(),{className:c.audioLoading})}):i.jsx(K.Z,{}),i.jsx(k(),{"aria-label":"sendRecordedAudio",component:"span",onClick:o,disabled:a,children:i.jsx(q(),{className:c.sendAudioIcon})})]}):i.jsx(k(),{"aria-label":"showRecorder",component:"span",disabled:a||"open"!==s,onClick:d,children:i.jsx(W(),{className:c.sendMessageIcons})})},eu=e=>{let{loading:t,inputRef:a,ticketStatus:n,inputMessage:r,setInputMessage:l,handleSendMessage:o,handleInputPaste:d,disableOption:c}=e,m=el(),[u,p]=(0,s.useState)([]),[h,g]=(0,s.useState)([]),[x,j]=(0,s.useState)(!1),{user:y}=(0,s.useContext)(et.V),{list:b}=(0,ei.Z)();(0,s.useEffect)(()=>{(async function(){let e=localStorage.getItem("companyId"),t=(await b({companyId:e,userId:y.id})).map(e=>{let t=e.message;return H()(t)&&t.length>35&&(t=e.message.substring(0,35)+"..."),{value:e.message,label:`/${e.shortcode} - ${t}`}});p(t)})()},[]),(0,s.useEffect)(()=>{if(H()(r)&&!G()(r)&&r.length>1){let e=r.charAt(0);j(e.indexOf("/")>-1);let t=u.filter(e=>e.label.indexOf(r)>-1);g(t)}else j(!1)},[r]);let v=()=>"open"===n?J.a.t("messagesInput.placeholderOpen"):J.a.t("messagesInput.placeholderClosed"),w=e=>{e&&(e.focus(),a.current=e)};return i.jsx("div",{className:m.messageInputWrapper,children:i.jsx($(),{freeSolo:!0,open:x,id:"grouped-demo",value:r,options:h,closeIcon:null,getOptionLabel:e=>_()(e)?e.label:e,onChange:(e,t)=>{_()(t)&&Q()(t,"value")&&(l(t.value),setTimeout(()=>{a.current.scrollTop=a.current.scrollHeight},200))},onInputChange:(e,t,a)=>{"input"===a&&l(e.target.value)},onPaste:e=>{"open"===n&&d(e)},onKeyPress:e=>{t||e.shiftKey||"Enter"!==e.key||o()},style:{width:"100%"},renderInput:e=>{let{InputLabelProps:t,InputProps:a,...n}=e;return i.jsx(f(),{...e.InputProps,...n,disabled:c(),inputRef:w,placeholder:v(),multiline:!0,className:m.messageInput,maxRows:5})}})})},ep=l()()(e=>{let{ticketStatus:t,ticketId:a}=e,n=el(),[r,l]=(0,s.useState)([]),[o,d]=(0,s.useState)(""),[c,m]=(0,s.useState)(!1),[p,h]=(0,s.useState)(!1),[x,f]=(0,s.useState)(!1),j=(0,s.useRef)(),{setReplyingMessage:b,replyingMessage:v}=(0,s.useContext)(ee._),{user:w}=(0,s.useContext)(et.V),[Z,S]=(0,ea._)("signOption",!0);(0,s.useEffect)(()=>{j.current.focus()},[v]),(0,s.useEffect)(()=>(j.current.focus(),()=>{d(""),m(!1),l([]),b(null)}),[a,b]);let A=async e=>{h(!0),e.preventDefault();let t=new FormData;t.append("fromMe",!0),r.forEach(e=>{t.append("medias",e),t.append("body",e.name)});try{await X.Z.post(`/messages/${a}`,t)}catch(e){(0,en.Z)(e)}h(!1),l([])},C=async()=>{if(""===o.trim())return;h(!0);let e={read:1,fromMe:!0,mediaUrl:"",body:Z?`*${w?.name}:*
${o.trim()}`:o.trim(),quotedMsg:v};try{await X.Z.post(`/messages/${a}`,e)}catch(e){(0,en.Z)(e)}d(""),m(!1),h(!1),b(null)},T=async()=>{h(!0);try{await navigator.mediaDevices.getUserMedia({audio:!0}),await er.start(),f(!0),h(!1)}catch(e){(0,en.Z)(e),h(!1)}},N=async()=>{h(!0);try{let[,e]=await er.stop().getMp3();if(e.size<1e4){h(!1),f(!1);return}let t=new FormData,n=`audio-record-site-${new Date().getTime()}.mp3`;t.append("medias",e,n),t.append("body",n),t.append("fromMe",!0),await X.Z.post(`/messages/${a}`,t)}catch(e){(0,en.Z)(e)}f(!1),h(!1)},E=async()=>{try{await er.stop().getMp3(),f(!1)}catch(e){(0,en.Z)(e)}},W=()=>p||x||"open"!==t;return r.length>0?(0,i.jsxs)(g(),{elevation:0,square:!0,className:n.viewMediaInputWrapper,children:[i.jsx(k(),{"aria-label":"cancel-upload",component:"span",onClick:e=>l([]),children:i.jsx(I(),{className:n.sendMessageIcons})}),p?i.jsx("div",{children:i.jsx(y(),{className:n.circleLoading})}):i.jsx("span",{children:r[0]?.name}),i.jsx(k(),{"aria-label":"send-upload",component:"span",onClick:A,disabled:p,children:i.jsx(M(),{className:n.sendMessageIcons})})]}):(0,i.jsxs)(g(),{square:!0,elevation:0,className:n.mainWrapper,children:[v&&(0,i.jsxs)("div",{className:n.replyginMsgWrapper,children:[(0,i.jsxs)("div",{className:n.replyginMsgContainer,children:[i.jsx("span",{className:u()(n.replyginContactMsgSideColor,{[n.replyginSelfMsgSideColor]:!v.fromMe})}),(0,i.jsxs)("div",{className:n.replyginMsgBody,children:[!v.fromMe&&i.jsx("span",{className:n.messageContactName,children:v.contact?.name}),v.body]})]}),i.jsx(k(),{"aria-label":"showRecorder",component:"span",disabled:p||"open"!==t,onClick:()=>b(null),children:i.jsx(R(),{className:n.sendMessageIcons})})]}),(0,i.jsxs)("div",{className:n.newMessageBox,children:[i.jsx(eo,{disabled:W(),handleAddEmoji:e=>{let t=e.native;d(e=>e+t)},showEmoji:c,setShowEmoji:m}),i.jsx(ec,{disableOption:W,handleChangeMedias:e=>{if(!e.target.files)return;let t=Array.from(e.target.files);l(t)}}),i.jsx(ed,{width:e.width,setSignMessage:S,signMessage:Z}),i.jsx(eu,{loading:p,inputRef:j,ticketStatus:t,inputMessage:o,setInputMessage:d,handleSendMessage:C,handleInputPaste:e=>{e.clipboardData.files[0]&&l([e.clipboardData.files[0]])},disableOption:W}),i.jsx(em,{inputMessage:o,loading:p,recording:x,ticketStatus:t,handleSendMessage:C,handleCancelAudio:E,handleUploadAudio:N,handleStartRecording:T})]})]})});n()}catch(e){n(e)}})},33505:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.d(t,{Z:()=>g});var i=a(20997),s=a(16689),r=a(48250),l=a.n(r),o=a(92921),d=a(38561),c=a(6133),m=a(35768),u=a(41447),p=a(151),h=e([p]);p=(h.then?(await h)():h)[0];let g=({message:e,menuOpen:t,handleClose:a,anchorEl:n})=>{let{setReplyingMessage:r}=(0,s.useContext)(u._),[h,g]=(0,s.useState)(!1),x=async()=>{try{await d.Z.delete(`/messages/${e.id}`)}catch(e){(0,p.Z)(e)}};return(0,i.jsxs)(i.Fragment,{children:[i.jsx(c.Z,{title:o.a.t("messageOptionsMenu.confirmationModal.title"),open:h,onClose:g,onConfirm:x,children:o.a.t("messageOptionsMenu.confirmationModal.message")}),(0,i.jsxs)(m.Z,{anchorEl:n,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:t,onClose:a,children:[e.fromMe&&i.jsx(l(),{onClick:e=>{g(!0),a()},children:o.a.t("messageOptionsMenu.delete")}),i.jsx(l(),{onClick:()=>{r(e),a()},children:o.a.t("messageOptionsMenu.reply")})]})]})};n()}catch(e){n(e)}})},59349:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.d(t,{Z:()=>q});var i=a(20997),s=a(16689),r=a.n(s),l=a(56794),o=a(78420),d=a(81743),c=a(68103),m=a.n(c),u=a(55223),p=a(41120),h=a(282),g=a(55517),x=a(17812),f=a(95477),j=a(44824),y=a(440),b=a(71336),v=a(5485),w=a(73099),Z=a(23018),k=a(40087),S=a(47506),A=a(33505),C=a(61613),M=a(55403),T=a(79275),I=a(38561),N=a(151),R=a(7405),E=e([k,A,M,N,R]);[k,A,M,N,R]=E.then?(await E)():E;let W=(0,p.Z)(e=>({messagesListWrapper:{overflow:"hidden",position:"relative",display:"flex",flexDirection:"column",flexGrow:1,width:"100%",minWidth:300,minHeight:200},messagesList:{backgroundImage:"light"===e.mode?`url(${C.Z})`:`url(${T.Z})`,display:"flex",flexDirection:"column",flexGrow:1,padding:"20px 20px 20px 20px",overflowY:"scroll",...e.scrollbarStyles},circleLoading:{color:u.green[500],position:"absolute",opacity:"70%",top:0,left:"50%",marginTop:12},messageLeft:{marginRight:20,marginTop:2,minWidth:100,maxWidth:600,height:"auto",display:"block",position:"relative","&:hover #messageActionsButton":{display:"flex",position:"absolute",top:0,right:0},whiteSpace:"pre-wrap",backgroundColor:"#ffffff",color:"#303030",alignSelf:"flex-start",borderTopLeftRadius:0,borderTopRightRadius:8,borderBottomLeftRadius:8,borderBottomRightRadius:8,paddingLeft:5,paddingRight:5,paddingTop:5,paddingBottom:0,boxShadow:"0 1px 1px #b3b3b3"},quotedContainerLeft:{margin:"-3px -80px 6px -6px",overflow:"hidden",backgroundColor:"#f0f0f0",borderRadius:"7.5px",display:"flex",position:"relative"},quotedMsg:{padding:10,maxWidth:300,height:"auto",display:"block",whiteSpace:"pre-wrap",overflow:"hidden"},quotedSideColorLeft:{flex:"none",width:"4px",backgroundColor:"#6bcbef"},messageRight:{marginLeft:20,marginTop:2,minWidth:100,maxWidth:600,height:"auto",display:"block",position:"relative","&:hover #messageActionsButton":{display:"flex",position:"absolute",top:0,right:0},whiteSpace:"pre-wrap",backgroundColor:"#dcf8c6",color:"#303030",alignSelf:"flex-end",borderTopLeftRadius:8,borderTopRightRadius:8,borderBottomLeftRadius:8,borderBottomRightRadius:0,paddingLeft:5,paddingRight:5,paddingTop:5,paddingBottom:0,boxShadow:"0 1px 1px #b3b3b3"},quotedContainerRight:{margin:"-3px -80px 6px -6px",overflowY:"hidden",backgroundColor:"#cfe9ba",borderRadius:"7.5px",display:"flex",position:"relative"},quotedMsgRight:{padding:10,maxWidth:300,height:"auto",whiteSpace:"pre-wrap"},quotedSideColorRight:{flex:"none",width:"4px",backgroundColor:"#35cd96"},messageActionsButton:{display:"none",position:"relative",color:"#999",zIndex:1,backgroundColor:"inherit",opacity:"90%","&:hover, &.Mui-focusVisible":{backgroundColor:"inherit"}},messageContactName:{display:"flex",color:"#6bcbef",fontWeight:500},textContentItem:{overflowWrap:"break-word",padding:"3px 80px 6px 6px"},textContentItemDeleted:{fontStyle:"italic",color:"rgba(0, 0, 0, 0.36)",overflowWrap:"break-word",padding:"3px 80px 6px 6px"},messageMedia:{objectFit:"cover",width:250,height:200,borderTopLeftRadius:8,borderTopRightRadius:8,borderBottomLeftRadius:8,borderBottomRightRadius:8},timestamp:{fontSize:11,position:"absolute",bottom:0,right:5,color:"#999"},dailyTimestamp:{alignItems:"center",textAlign:"center",alignSelf:"center",width:"110px",backgroundColor:"#e1f3fb",margin:"10px",borderRadius:"10px",boxShadow:"0 1px 1px #b3b3b3"},dailyTimestampText:{color:"#808888",padding:8,alignSelf:"center",marginLeft:"0px"},ackIcons:{fontSize:18,verticalAlign:"middle",marginLeft:4},deletedIcon:{fontSize:18,verticalAlign:"middle",marginRight:4},ackDoneAllIcon:{color:u.green[500],fontSize:18,verticalAlign:"middle",marginLeft:4},downloadMedia:{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"inherit",padding:10}})),L=(e,t)=>{if("LOAD_MESSAGES"===t.type){let a=t.payload,n=[];return a.forEach(t=>{let a=e.findIndex(e=>e.id===t.id);-1!==a?e[a]=t:n.push(t)}),[...n,...e]}if("ADD_MESSAGE"===t.type){let a=t.payload,n=e.findIndex(e=>e.id===a.id);return -1!==n?e[n]=a:e.push(a),[...e]}if("UPDATE_MESSAGE"===t.type){let a=t.payload,n=e.findIndex(e=>e.id===a.id);return -1!==n&&(e[n]=a),[...e]}if("RESET"===t.type)return[]},q=({ticket:e,ticketId:t,isGroup:a})=>{let n=W(),[c,u]=(0,s.useReducer)(L,[]),[p,C]=(0,s.useState)(1),[T,E]=(0,s.useState)(!1),[q,D]=(0,s.useState)(!1),F=(0,s.useRef)(),[O,B]=(0,s.useState)({}),[P,$]=(0,s.useState)(null),z=(0,s.useRef)(t);(0,s.useEffect)(()=>{u({type:"RESET"}),C(1),z.current=t},[t]),(0,s.useEffect)(()=>{D(!0);let e=setTimeout(()=>{(async()=>{if(void 0!==t)try{let{data:e}=await I.Z.get("/messages/"+t,{params:{pageNumber:p}});z.current===t&&(u({type:"LOAD_MESSAGES",payload:e.messages}),E(e.hasMore),D(!1)),1===p&&e.messages.length>1&&U()}catch(e){D(!1),(0,N.Z)(e)}})()},500);return()=>{clearTimeout(e)}},[p,t]),(0,s.useEffect)(()=>{let t=localStorage.getItem("companyId"),a=(0,R.C)({companyId:t});return a.on("connect",()=>a.emit("joinChatBox",`${e.id}`)),a.on(`company-${t}-appMessage`,e=>{"create"===e.action&&(u({type:"ADD_MESSAGE",payload:e.message}),U()),"update"===e.action&&u({type:"UPDATE_MESSAGE",payload:e.message})}),()=>{a.disconnect()}},[t,e]);let H=()=>{C(e=>e+1)},U=()=>{F.current&&F.current.scrollIntoView({})},G=(e,t)=>{$(e.currentTarget),B(t)},V=e=>{if("locationMessage"===e.mediaType&&e.body.split("|").length>=2){let t=e.body.split("|"),a=t[0],n=t[1],s=null;return t.length>2&&(s=e.body.split("|")[2]),i.jsx(M.Z,{image:a,link:n,description:s})}return"image"===e.mediaType?i.jsx(S.Z,{imageUrl:e.mediaUrl}):"audio"===e.mediaType?i.jsx("audio",{controls:!0,children:i.jsx("source",{src:e.mediaUrl,type:"audio/ogg"})}):"video"===e.mediaType?i.jsx("video",{className:n.messageMedia,src:e.mediaUrl,controls:!0}):(0,i.jsxs)(i.Fragment,{children:[i.jsx("div",{className:n.downloadMedia,children:i.jsx(h.Z,{startIcon:i.jsx(j.Z,{}),color:"primary",variant:"outlined",target:"_blank",href:e.mediaUrl,children:"Download"})}),i.jsx(g.Z,{})]})},_=e=>1===e.ack?i.jsx(y.Z,{fontSize:"small",className:n.ackIcons}):2===e.ack?i.jsx(b.Z,{fontSize:"small",className:n.ackIcons}):3===e.ack?i.jsx(v.Z,{fontSize:"small",className:n.ackIcons}):4===e.ack||5===e.ack?i.jsx(v.Z,{fontSize:"small",className:n.ackDoneAllIcon}):void 0,Y=(e,t)=>{if(0===t)return i.jsx("span",{className:n.dailyTimestamp,children:i.jsx("div",{className:n.dailyTimestampText,children:(0,l.Z)((0,o.Z)(c[t].createdAt),"dd/MM/yyyy")})},`timestamp-${e.id}`);if(t<c.length-1){let a=(0,o.Z)(c[t].createdAt),s=(0,o.Z)(c[t-1].createdAt);if(!(0,d.Z)(a,s))return i.jsx("span",{className:n.dailyTimestamp,children:i.jsx("div",{className:n.dailyTimestampText,children:(0,l.Z)((0,o.Z)(c[t].createdAt),"dd/MM/yyyy")})},`timestamp-${e.id}`)}if(t===c.length-1)return i.jsx("div",{ref:F,style:{float:"left",clear:"both"}},`ref-${e.createdAt}`)},Q=(e,t)=>{if(t<c.length&&t>0){let a=e.ticketId;e.ticket?.whatsapp?.name;let s=c[t-1].ticketId;if(a!==s)return(0,i.jsxs)("center",{children:[(0,i.jsxs)("div",{className:n.ticketNunberClosed,children:["Conversa encerrada: ",(0,l.Z)((0,o.Z)(c[t-1].createdAt),"dd/MM/yyyy HH:mm:ss")]}),(0,i.jsxs)("div",{className:n.ticketNunberOpen,children:["Conversa iniciada: ",(0,l.Z)((0,o.Z)(e.createdAt),"dd/MM/yyyy HH:mm:ss")]})]})}},J=(e,t)=>{if(t<c.length&&t>0){let a=c[t].fromMe,n=c[t-1].fromMe;if(a!==n)return i.jsx("span",{style:{marginTop:16}},`divider-${e.id}`)}},X=e=>(0,i.jsxs)("div",{className:m()(n.quotedContainerLeft,{[n.quotedContainerRight]:e.fromMe}),children:[i.jsx("span",{className:m()(n.quotedSideColorLeft,{[n.quotedSideColorRight]:e.quotedMsg?.fromMe})}),(0,i.jsxs)("div",{className:n.quotedMsg,children:[!e.quotedMsg?.fromMe&&i.jsx("span",{className:n.messageContactName,children:e.quotedMsg?.contact?.name}),"audio"===e.quotedMsg.mediaType&&i.jsx("div",{className:n.downloadMedia,children:i.jsx("audio",{controls:!0,children:i.jsx("source",{src:e.quotedMsg.mediaUrl,type:"audio/ogg"})})}),"video"===e.quotedMsg.mediaType&&i.jsx("video",{className:n.messageMedia,src:e.quotedMsg.mediaUrl,controls:!0}),"application"===e.quotedMsg.mediaType&&i.jsx("div",{className:n.downloadMedia,children:i.jsx(h.Z,{startIcon:i.jsx(j.Z,{}),color:"primary",variant:"outlined",target:"_blank",href:e.quotedMsg.mediaUrl,children:"Download"})}),"image"===e.quotedMsg.mediaType&&i.jsx(S.Z,{imageUrl:e.quotedMsg.mediaUrl})||e.quotedMsg?.body]})]});return(0,i.jsxs)("div",{className:n.messagesListWrapper,children:[i.jsx(A.Z,{message:O,anchorEl:P,menuOpen:!!P,handleClose:e=>{$(null)}}),i.jsx("div",{id:"messagesList",className:n.messagesList,onScroll:e=>{if(!T)return;let{scrollTop:t}=e.currentTarget;0===t&&(document.getElementById("messagesList").scrollTop=1),!q&&t<50&&H()},children:c.length>0?c.length>0?c.map((e,t)=>"call_log"===e.mediaType?(0,i.jsxs)(r().Fragment,{children:[Y(e,t),Q(e,t),J(e,t),(0,i.jsxs)("div",{className:n.messageCenter,children:[i.jsx(x.Z,{variant:"contained",size:"small",id:"messageActionsButton",disabled:e.isDeleted,className:n.messageActionsButton,onClick:t=>G(t,e),children:i.jsx(w.Z,{})}),a&&i.jsx("span",{className:n.messageContactName,children:e.contact?.name}),(0,i.jsxs)("div",{children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 17",width:"20",height:"17",children:i.jsx("path",{fill:"#df3333",d:"M18.2 12.1c-1.5-1.8-5-2.7-8.2-2.7s-6.7 1-8.2 2.7c-.7.8-.3 2.3.2 2.8.2.2.3.3.5.3 1.4 0 3.6-.7 3.6-.7.5-.2.8-.5.8-1v-1.3c.7-1.2 5.4-1.2 6.4-.1l.1.1v1.3c0 .2.1.4.2.6.1.2.3.3.5.4 0 0 2.2.7 3.6.7.2 0 1.4-2 .5-3.1zM5.4 3.2l4.7 4.6 5.8-5.7-.9-.8L10.1 6 6.4 2.3h2.5V1H4.1v4.8h1.3V3.2z"})})," ",(0,i.jsxs)("span",{children:["Chamada de voz/v\xeddeo perdida \xe0s ",(0,l.Z)((0,o.Z)(e.createdAt),"HH:mm")]})]})]})]},e.id):e.fromMe?(0,i.jsxs)(r().Fragment,{children:[Y(e,t),Q(e,t),J(e,t),(0,i.jsxs)("div",{className:n.messageRight,children:[i.jsx(x.Z,{variant:"contained",size:"small",id:"messageActionsButton",disabled:e.isDeleted,className:n.messageActionsButton,onClick:t=>G(t,e),children:i.jsx(w.Z,{})}),(e.mediaUrl||"locationMessage"===e.mediaType||"vcard"===e.mediaType)&&V(e),(0,i.jsxs)("div",{className:m()(n.textContentItem,{[n.textContentItemDeleted]:e.isDeleted}),children:[e.isDeleted&&i.jsx(Z.Z,{color:"disabled",fontSize:"small",className:n.deletedIcon}),e.quotedMsg&&X(e),i.jsx(k.Z,{children:e.body}),(0,i.jsxs)("span",{className:n.timestamp,children:[(0,l.Z)((0,o.Z)(e.createdAt),"HH:mm"),_(e)]})]})]})]},e.id):(0,i.jsxs)(r().Fragment,{children:[Y(e,t),Q(e,t),J(e,t),(0,i.jsxs)("div",{className:n.messageLeft,children:[i.jsx(x.Z,{variant:"contained",size:"small",id:"messageActionsButton",disabled:e.isDeleted,className:n.messageActionsButton,onClick:t=>G(t,e),children:i.jsx(w.Z,{})}),a&&i.jsx("span",{className:n.messageContactName,children:e.contact?.name}),e.isDeleted&&i.jsx("div",{children:(0,i.jsxs)("span",{className:"message-deleted",children:["Essa mensagem foi apagada pelo contato \xa0",i.jsx(Z.Z,{color:"error",fontSize:"small",className:n.deletedIcon})]})}),(e.mediaUrl||"locationMessage"===e.mediaType||"vcard"===e.mediaType)&&V(e),(0,i.jsxs)("div",{className:n.textContentItem,children:[e.quotedMsg&&X(e),i.jsx(k.Z,{children:"locationMessage"===e.mediaType?null:e.body}),i.jsx("span",{className:n.timestamp,children:(0,l.Z)((0,o.Z)(e.createdAt),"HH:mm")})]})]})]},e.id)):i.jsx("div",{children:"Diga ol\xe1 para seu novo contato!"}):[]}),q&&i.jsx("div",{children:i.jsx(f.Z,{className:n.circleLoading})})]})};n()}catch(e){n(e)}})},47506:(e,t,a)=>{a.d(t,{Z:()=>c});var n=a(20997),i=a(16689),s=a(48308),r=a(34781),l=a.n(r),o=a(38561);let d=(0,s.makeStyles)(e=>({messageMedia:{objectFit:"cover",width:250,height:200,borderTopLeftRadius:8,borderTopRightRadius:8,borderBottomLeftRadius:8,borderBottomRightRadius:8}})),c=({imageUrl:e})=>{let t=d(),[a,s]=(0,i.useState)(!0),[r,c]=(0,i.useState)("");return(0,i.useEffect)(()=>{e&&(async()=>{let{data:t,headers:a}=await o.Z.get(e,{responseType:"blob"});c(window.URL.createObjectURL(new Blob([t],{type:a["content-type"]}))),s(!1)})()},[e]),n.jsx(l(),{className:t.messageMedia,smallSrcSet:a?e:r,medium:a?e:r,large:a?e:r,alt:"image"})}},7848:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.d(t,{Z:()=>$});var i=a(20997),s=a(16689),r=a(75609),l=a(2296),o=a(3590),d=a(14661),c=a(48308),m=a(55223),u=a(12610),p=a.n(u),h=a(26481),g=a.n(h),x=a(81961),f=a.n(x),j=a(80929),y=a.n(j),b=a(46856),v=a.n(b),w=a(82400),Z=a.n(w),k=a(9069),S=a.n(k),A=a(92921),C=a(38561),M=a(151),T=a(64436),I=a(88129),N=a.n(I),R=a(32245),E=a.n(R),W=a(58582),L=a(35599),q=a.n(L),D=a(59969),F=a.n(D),O=e([o,M,W]);[o,M,W]=O.then?(await O)():O;let B=(0,c.makeStyles)(e=>({root:{display:"flex",flexWrap:"wrap"},multFieldLine:{display:"flex","& > *:not(:last-child)":{marginRight:e.spacing(1)}},btnWrapper:{position:"relative"},buttonProgress:{color:m.green[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},formControl:{margin:e.spacing(1),minWidth:120}})),P=r.object().shape({body:r.string().min(5,"Mensagem muito curta").required("Obrigat\xf3rio"),contactId:r.number().required("Obrigat\xf3rio"),sendAt:r.string().required("Obrigat\xf3rio")}),$=({open:e,onClose:t,scheduleId:a,contactId:n,cleanContact:r,reload:c})=>{let m=B(),u=(0,d.useNavigate)(),{user:h}=(0,s.useContext)(W.V),x={body:"",contactId:"",sendAt:E()().add(1,"hour").format("YYYY-MM-DDTHH:mm"),sentAt:""},j={id:"",name:""},[b,w]=(0,s.useState)(x),[k,I]=(0,s.useState)(j),[R,L]=(0,s.useState)([j]);(0,s.useEffect)(()=>{if(n&&R.length){let e=R.find(e=>e.id===n);e&&I(e)}},[n,R]),(0,s.useEffect)(()=>{let{companyId:t}=h;if(e)try{(async()=>{let{data:e}=await C.Z.get("/contacts/list",{params:{companyId:t}}),i=e.map(e=>({id:e.id,name:e.name}));if(q()(i)&&L([{id:"",name:""},...i]),n&&w(e=>({...e,contactId:n})),!a)return;let{data:s}=await C.Z.get(`/schedules/${a}`);w(e=>({...e,...s,sendAt:E()(s.sendAt).format("YYYY-MM-DDTHH:mm")})),I(s.contact)})()}catch(e){(0,M.Z)(e)}},[a,n,e,h]);let D=()=>{t(),w(x)},O=async e=>{let t={...e,userId:h.id};try{a?await C.Z.put(`/schedules/${a}`,t):await C.Z.post("/schedules",t),o.toast.success(A.a.t("scheduleModal.success")),"function"==typeof c&&c(),n&&"function"==typeof r&&(r(),u.push("/schedules"))}catch(e){(0,M.Z)(e)}I(j),w(x),D()};return i.jsx("div",{className:m.root,children:(0,i.jsxs)(f(),{open:e,onClose:D,maxWidth:"xs",fullWidth:!0,scroll:"paper",children:[i.jsx(Z(),{id:"form-dialog-title",children:"ERRO"===b.status?"Erro de Envio":`Mensagem ${F()(b.status)}`}),i.jsx(l.Formik,{initialValues:b,enableReinitialize:!0,validationSchema:P,onSubmit:(e,t)=>{setTimeout(()=>{O(e),t.setSubmitting(!1)},400)},children:({touched:e,errors:t,isSubmitting:n,values:s})=>(0,i.jsxs)(l.Form,{children:[(0,i.jsxs)(v(),{dividers:!0,children:[i.jsx("div",{className:m.multFieldLine,children:i.jsx(T.Z,{variant:"outlined",fullWidth:!0,children:i.jsx(N(),{fullWidth:!0,value:k,options:R,onChange:(e,t)=>{let a=t?t.id:"";w({...b,contactId:a}),I(t||j)},getOptionLabel:e=>e.name,getOptionSelected:(e,t)=>t.id===e.id,renderInput:e=>i.jsx(g(),{...e,variant:"outlined",placeholder:"Contato"})})})}),i.jsx("br",{}),i.jsx("div",{className:m.multFieldLine,children:i.jsx(l.Field,{as:g(),rows:9,multiline:!0,label:A.a.t("scheduleModal.form.body"),name:"body",error:e.body&&!!t.body,helperText:e.body&&t.body,variant:"outlined",margin:"dense",fullWidth:!0})}),i.jsx("br",{}),i.jsx("div",{className:m.multFieldLine,children:i.jsx(l.Field,{as:g(),label:A.a.t("scheduleModal.form.sendAt"),type:"datetime-local",name:"sendAt",InputLabelProps:{shrink:!0},error:e.sendAt&&!!t.sendAt,helperText:e.sendAt&&t.sendAt,variant:"outlined",fullWidth:!0})})]}),(0,i.jsxs)(y(),{children:[i.jsx(p(),{onClick:D,color:"secondary",disabled:n,variant:"outlined",children:A.a.t("scheduleModal.buttons.cancel")}),(null===b.sentAt||""===b.sentAt)&&(0,i.jsxs)(p(),{type:"submit",color:"primary",disabled:n,variant:"contained",className:m.btnWrapper,children:[a?`${A.a.t("scheduleModal.buttons.okEdit")}`:`${A.a.t("scheduleModal.buttons.okAdd")}`,n&&i.jsx(S(),{size:24,className:m.buttonProgress})]})]})]})})]})})};n()}catch(e){n(e)}})},91903:(e,t,a)=>{a.d(t,{Z:()=>i});var n=a(20997);a(16689);let i=({children:e,value:t,name:a,...i})=>t===a?n.jsx("div",{role:"tabpanel",id:`simple-tabpanel-${a}`,"aria-labelledby":`simple-tab-${a}`,...i,children:n.jsx(n.Fragment,{children:e})}):null},92354:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.d(t,{r:()=>j});var i=a(20997),s=a(79895),r=a(16204),l=a(39803),o=a(88129),d=a.n(o),c=a(16689),m=a(35599),u=a.n(m),p=a(97026),h=a.n(p),g=a(151),x=a(38561),f=e([g]);function j({ticket:e}){let[t,a]=(0,c.useState)([]),[n,o]=(0,c.useState)([]),m=(0,c.useRef)(!0);(0,c.useEffect)(()=>()=>{m.current=!1},[]),(0,c.useEffect)(()=>{m.current&&f().then(()=>{Array.isArray(e.tags)?o(e.tags):o([])})},[e]);let p=async e=>{try{let{data:t}=await x.Z.post("/tags",e);return t}catch(e){(0,g.Z)(e)}},f=async()=>{try{let{data:e}=await x.Z.get("/tags/list");a(e)}catch(e){(0,g.Z)(e)}},j=async e=>{try{let{data:t}=await x.Z.post("/tags/sync",e);return t}catch(e){(0,g.Z)(e)}},y=async(t,a)=>{let n=[];if("create-option"===a){if(u()(t))for(let e of t)if(h()(e)){let t=await p({name:e});n.push(t)}else n.push(e);await f()}else n=t;o(n),await j({ticketId:e.id,tags:n})};return i.jsx(s.Z,{style:{padding:12},children:i.jsx(d(),{multiple:!0,size:"small",options:t,value:n,freeSolo:!0,onChange:(e,t,a)=>y(t,a),getOptionLabel:e=>e.name,renderTags:(e,t)=>e.map((e,a)=>i.jsx(r.Z,{variant:"outlined",style:{background:e.color||"#eee",color:"#FFF",marginRight:1,fontWeight:600,borderRadius:3,fontSize:"0.8em",whiteSpace:"nowrap"},label:e.name.toUpperCase(),...t({index:a}),size:"small"})),renderInput:e=>i.jsx(l.Z,{...e,variant:"outlined",placeholder:"Tags"}),PaperComponent:({children:e})=>i.jsx(s.Z,{style:{width:400,marginLeft:12},children:e})})})}g=(f.then?(await f)():f)[0],n()}catch(e){n(e)}})},9599:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.d(t,{Z:()=>C});var i=a(20997),s=a(16689),r=a(14661),l=a(48308),o=a(17812),d=a(43724),c=a(64126),m=a(92921),u=a(38561),p=a(42125),h=a(79213),g=a(151),x=a(58582),f=a(5557),j=a(33585),y=a.n(j),b=a(40270),v=a.n(b),w=a(59641),Z=a.n(w),k=a(55223),S=e([p,g,x]);[p,g,x]=S.then?(await S)():S;let A=(0,l.makeStyles)(e=>({actionButtons:{marginRight:6,flex:"none",alignSelf:"center",marginLeft:"auto","& > *":{margin:e.spacing(.5)}}})),C=({ticket:e})=>{let t=A(),a=(0,r.useNavigate)(),[n,j]=(0,s.useState)(null),[b,w]=(0,s.useState)(!1),{user:S}=(0,s.useContext)(x.V),{setCurrentTicket:C}=(0,s.useContext)(f.o),M=(0,l.createTheme)({palette:{primary:k.green}}),T=async(t,n,i)=>{w(!0);try{await u.Z.put(`/tickets/${e.id}`,{status:n,userId:i||null}),w(!1),"open"===n?C({...e,code:"#open"}):(C({id:null,code:null}),a.push("/tickets"))}catch(e){w(!1),(0,g.Z)(e)}};return(0,i.jsxs)("div",{className:t.actionButtons,children:["closed"===e.status&&i.jsx(h.Z,{loading:b,startIcon:i.jsx(d.Z,{}),size:"small",onClick:e=>T(e,"open",S?.id),children:m.a.t("messagesList.header.buttons.reopen")}),"open"===e.status&&(0,i.jsxs)(i.Fragment,{children:[i.jsx(Z(),{title:m.a.t("messagesList.header.buttons.return"),children:i.jsx(o.Z,{onClick:e=>T(e,"pending",null),children:i.jsx(v(),{})})}),i.jsx(l.ThemeProvider,{theme:M,children:i.jsx(Z(),{title:m.a.t("messagesList.header.buttons.resolve"),children:i.jsx(o.Z,{onClick:e=>T(e,"closed",S?.id),color:"primary",children:i.jsx(y(),{})})})}),i.jsx(o.Z,{onClick:e=>{j(e.currentTarget)},children:i.jsx(c.Z,{})}),i.jsx(p.Z,{ticket:e,anchorEl:n,menuOpen:!!n,handleClose:e=>{j(null)}})]}),"pending"===e.status&&i.jsx(h.Z,{loading:b,size:"small",variant:"contained",color:"primary",onClick:e=>T(e,"open",S?.id),children:m.a.t("messagesList.header.buttons.accept")})]})};n()}catch(e){n(e)}})},80314:(e,t,a)=>{a.d(t,{Z:()=>p});var n=a(20997);a(16689);var i=a(18463),s=a(48308),r=a(94697),l=a(67265),o=a(44164),d=a.n(o);let c=(0,s.makeStyles)(e=>({ticketHeader:{display:"flex",backgroundColor:"#eee",flex:"none",borderBottom:"1px solid rgba(0, 0, 0, 0.12)"}})),m=()=>{let e=c();return n.jsx(i.Z,{square:!0,className:e.ticketHeader,children:n.jsx(r.Z,{titleTypographyProps:{noWrap:!0},subheaderTypographyProps:{noWrap:!0},avatar:n.jsx(d(),{animation:"wave",variant:"circle",children:n.jsx(l.Z,{alt:"contact_image"})}),title:n.jsx(d(),{animation:"wave",width:80}),subheader:n.jsx(d(),{animation:"wave",width:140})})})},u=(0,s.makeStyles)(e=>({ticketHeader:{display:"flex",backgroundColor:e.palette.tabHeaderBackground,flex:"none",borderBottom:"1px solid rgba(0, 0, 0, 0.12)",[e.breakpoints.down("sm")]:{flexWrap:"wrap"}}})),p=({loading:e,children:t})=>{let a=u();return n.jsx(n.Fragment,{children:e?n.jsx(m,{}):n.jsx(i.Z,{square:!0,className:a.ticketHeader,children:t})})}},7165:(e,t,a)=>{a.d(t,{Z:()=>o});var n=a(20997),i=a(16689),s=a(94697),r=a(67265),l=a(92921);let o=({contact:e,ticket:t,onClick:a})=>{let{user:o}=t,[d,c]=(0,i.useState)(""),[m,u]=(0,i.useState)("");return(0,i.useEffect)(()=>{e&&(u(e.name),document.body.offsetWidth<600&&e.name.length>10&&u(e.name.substring(0,10)+"...")),o&&e&&(c(`${l.a.t("messagesList.header.assignedTo")} ${o.name}`),document.body.offsetWidth<600&&c(`${o.name}`))},[]),n.jsx(s.Z,{onClick:a,style:{cursor:"pointer"},titleTypographyProps:{noWrap:!0},subheaderTypographyProps:{noWrap:!0},avatar:n.jsx(r.Z,{src:e.profilePicUrl,alt:"contact_image"}),title:`${m} #${t.id}`,subheader:t.user&&`${d}`})}},42125:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.d(t,{Z:()=>y});var i=a(20997),s=a(16689),r=a(48250),l=a.n(r),o=a(55986),d=a.n(o),c=a(92921),m=a(38561),u=a(6133),p=a(8672),h=a(151),g=a(20929),x=a(58582),f=a(7848),j=e([p,h,x,f]);[p,h,x,f]=j.then?(await j)():j;let y=({ticket:e,menuOpen:t,handleClose:a,anchorEl:n})=>{let[r,o]=(0,s.useState)(!1),[j,y]=(0,s.useState)(!1),b=(0,s.useRef)(!0),{user:v}=(0,s.useContext)(x.V),[w,Z]=(0,s.useState)(!1),[k,S]=(0,s.useState)(null);(0,s.useEffect)(()=>()=>{b.current=!1},[]);let A=async()=>{try{await m.Z.delete(`/tickets/${e.id}`)}catch(e){(0,h.Z)(e)}},C=e=>{o(!0),a()};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(d(),{id:"menu-appbar",anchorEl:n,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:t,onClose:a,children:[i.jsx(l(),{onClick:()=>{a(),S(e.contact.id),Z(!0)},children:c.a.t("ticketOptionsMenu.schedule")}),i.jsx(l(),{onClick:e=>{y(!0),a()},children:c.a.t("ticketOptionsMenu.transfer")}),i.jsx(g.m,{role:v.profile,perform:"ticket-options:deleteTicket",yes:()=>i.jsx(l(),{onClick:C,children:c.a.t("ticketOptionsMenu.delete")})})]}),i.jsx(u.Z,{title:`${c.a.t("ticketOptionsMenu.confirmationModal.title")}${e.id} ${c.a.t("ticketOptionsMenu.confirmationModal.titleFrom")} ${e.contact.name}?`,open:r,onClose:o,onConfirm:A,children:c.a.t("ticketOptionsMenu.confirmationModal.message")}),i.jsx(p.Z,{modalOpen:j,onClose:()=>{b.current&&y(!1)},ticketid:e.id}),i.jsx(f.Z,{open:w,onClose:()=>{Z(!1),S(null)},"aria-labelledby":"form-dialog-title",contactId:k})]})};n()}catch(e){n(e)}})},64602:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.d(t,{Z:()=>A});var i=a(20997),s=a(16689),r=a(14661),l=a(3590),o=a(68103),d=a.n(o),c=a(41120),m=a(79895),u=a(57507),p=a(56744),h=a(80314),g=a(7165),x=a(9599),f=a(59349),j=a(38561),y=a(41447),b=a(151),v=a(58582),w=a(92354),Z=a(7405),k=e([l,u,p,x,f,b,v,w,Z]);[l,u,p,x,f,b,v,w,Z]=k.then?(await k)():k;let S=(0,c.Z)(e=>({root:{display:"flex",height:"100%",position:"relative",overflow:"hidden"},mainWrapper:{flex:1,height:"100%",display:"flex",flexDirection:"column",overflow:"hidden",borderTopLeftRadius:0,borderBottomLeftRadius:0,borderLeft:"0",marginRight:-320,transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},mainWrapperShift:{borderTopRightRadius:0,borderBottomRightRadius:0,transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginRight:0}})),A=()=>{let{ticketId:e}=(0,r.useParams)(),t=(0,r.useNavigate)(),a=S(),{user:n}=(0,s.useContext)(v.V),[o,c]=(0,s.useState)(!1),[k,A]=(0,s.useState)(!0),[C,M]=(0,s.useState)({}),[T,I]=(0,s.useState)({});(0,s.useEffect)(()=>{A(!0);let a=setTimeout(()=>{(async()=>{try{let{data:a}=await j.Z.get("/tickets/u/"+e),{queueId:i}=a,{queues:s,profile:r}=n,o=s.find(e=>e.id===i);if(void 0===o&&"admin"!==r){l.toast.error("Acesso n\xe3o permitido"),t.push("/tickets");return}M(a.contact),I(a),A(!1)}catch(e){A(!1),(0,b.Z)(e)}})()},500);return()=>clearTimeout(a)},[e,n,t]),(0,s.useEffect)(()=>{let e=localStorage.getItem("companyId"),a=(0,Z.C)({companyId:e});return a.on("connect",()=>a.emit("joinChatBox",`${T.id}`)),a.on(`company-${e}-ticket`,e=>{"update"===e.action&&I(e.ticket),"delete"===e.action&&(l.toast.success("Ticket deleted sucessfully."),t.push("/tickets"))}),a.on(`company-${e}-contact`,e=>{"update"===e.action&&M(t=>t.id===e.contact?.id?{...t,...e.contact}:t)}),()=>{a.disconnect()}},[e,T,t]);let N=()=>{c(!0)};return(0,i.jsxs)("div",{className:a.root,id:"drawer-container",children:[(0,i.jsxs)(m.Z,{variant:"outlined",elevation:0,className:d()(a.mainWrapper,{[a.mainWrapperShift]:o}),children:[(0,i.jsxs)(h.Z,{loading:k,children:[(()=>{if(void 0!==T.user)return i.jsx(g.Z,{contact:C,ticket:T,onClick:N})})(),i.jsx(x.Z,{ticket:T})]}),i.jsx(m.Z,{children:i.jsx(w.r,{ticket:T})}),i.jsx(y.J,{children:(0,i.jsxs)(i.Fragment,{children:[i.jsx(f.Z,{ticket:T,ticketId:T.id,isGroup:T.isGroup}),i.jsx(p.Z,{ticketId:T.id,ticketStatus:T.status})]})})]}),i.jsx(u.Z,{open:o,handleDrawerClose:()=>{c(!1)},contact:C,loading:k,ticket:T})]})};n()}catch(e){n(e)}})},58891:(e,t,a)=>{a.d(t,{Z:()=>h});var n=a(20997);a(16689);var i=a(26256),s=a.n(i),r=a(45168),l=a.n(r),o=a(30774),d=a.n(o),c=a(92217),m=a.n(c),u=a(44164),p=a.n(u);let h=()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(s(),{dense:!0,children:[n.jsx(d(),{children:n.jsx(p(),{animation:"wave",variant:"circle",width:40,height:40})}),n.jsx(l(),{primary:n.jsx(p(),{animation:"wave",height:20,width:60}),secondary:n.jsx(p(),{animation:"wave",height:20,width:90})})]}),n.jsx(m(),{variant:"inset"}),(0,n.jsxs)(s(),{dense:!0,children:[n.jsx(d(),{children:n.jsx(p(),{animation:"wave",variant:"circle",width:40,height:40})}),n.jsx(l(),{primary:n.jsx(p(),{animation:"wave",height:20,width:70}),secondary:n.jsx(p(),{animation:"wave",height:20,width:120})})]}),n.jsx(m(),{variant:"inset"}),(0,n.jsxs)(s(),{dense:!0,children:[n.jsx(d(),{children:n.jsx(p(),{animation:"wave",variant:"circle",width:40,height:40})}),n.jsx(l(),{primary:n.jsx(p(),{animation:"wave",height:20,width:60}),secondary:n.jsx(p(),{animation:"wave",height:20,width:90})})]}),n.jsx(m(),{variant:"inset"})]})},29700:(e,t,a)=>{a.d(t,{Z:()=>p});var n=a(20997);a(16689);var i=a(48250),s=a.n(i),r=a(75811),l=a.n(r),o=a(84614),d=a.n(o),c=a(80797),m=a(95757),u=a(92921);let p=({userQueues:e,selectedQueueIds:t=[],onChange:a})=>n.jsx("div",{style:{width:120,marginTop:-4},children:n.jsx(l(),{fullWidth:!0,margin:"dense",children:n.jsx(d(),{multiple:!0,displayEmpty:!0,variant:"outlined",value:t,onChange:e=>{a(e.target.value)},MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null},renderValue:()=>u.a.t("ticketsQueueSelect.placeholder"),children:e?.length>0&&e.map(e=>(0,n.jsxs)(s(),{dense:!0,value:e.id,children:[n.jsx(c.Z,{style:{color:e.color},size:"small",color:"primary",checked:t.indexOf(e.id)>-1}),n.jsx(m.Z,{primary:e.name})]},e.id))})})})},8672:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.d(t,{Z:()=>P});var i=a(20997),s=a(16689),r=a.n(s),l=a(14661),o=a(12610),d=a.n(o),c=a(26481),m=a.n(c),u=a(81961),p=a.n(u),h=a(84614),g=a.n(h),x=a(75811),f=a.n(x),j=a(68190),y=a.n(j),b=a(48250),v=a.n(b),w=a(41120),Z=a(80929),k=a.n(Z),S=a(46856),A=a.n(S),C=a(82400),M=a.n(C),T=a(88129),I=a.n(T),N=a(9069),R=a.n(N),E=a(92921),W=a(38561),L=a(79213),q=a(151),D=a(63802),F=e([q]);q=(F.then?(await F)():F)[0];let O=(0,w.Z)(e=>({maxWidth:{width:"100%"}})),B=(0,T.createFilterOptions)({trim:!0}),P=({modalOpen:e,onClose:t,ticketid:a})=>{let n=(0,l.useNavigate)(),[o,c]=(0,s.useState)([]),[u,h]=(0,s.useState)([]),[x,j]=(0,s.useState)([]),[b,w]=(0,s.useState)(!1),[Z,S]=(0,s.useState)(""),[C,T]=(0,s.useState)(null),[N,F]=(0,s.useState)(""),P=O(),{findAll:$}=(0,D.Z)(),z=(0,s.useRef)(!0);(0,s.useEffect)(()=>()=>{z.current=!1},[]),(0,s.useEffect)(()=>{z.current&&(async()=>{let e=await $();j(e),h(e)})()},[]),(0,s.useEffect)(()=>{if(!e||Z.length<3){w(!1);return}let t=setTimeout(()=>{w(!0),(async()=>{try{let{data:e}=await W.Z.get("/users/",{params:{searchParam:Z}});c(e.users),w(!1)}catch(e){w(!1),(0,q.Z)(e)}})()},500);return()=>clearTimeout(t)},[Z,e]);let H=()=>{t(),S(""),T(null)},U=async e=>{if(e.preventDefault(),a&&N&&""!==N){w(!0);try{let e={};C&&(e.userId=C.id),N&&null!==N&&(e.queueId=N,C||(e.status="pending",e.userId=null)),await W.Z.put(`/tickets/${a}`,e),n.push("/tickets")}catch(e){w(!1),(0,q.Z)(e)}}};return i.jsx(p(),{open:e,onClose:H,maxWidth:"lg",scroll:"paper",children:(0,i.jsxs)("form",{onSubmit:U,children:[i.jsx(M(),{id:"form-dialog-title",children:E.a.t("transferTicketModal.title")}),(0,i.jsxs)(A(),{dividers:!0,children:[i.jsx(I(),{style:{width:300,marginBottom:20},getOptionLabel:e=>`${e.name}`,onChange:(e,t)=>{T(t),null!=t&&Array.isArray(t.queues)?h(t.queues):(h(x),F(""))},options:o,filterOptions:B,freeSolo:!0,autoHighlight:!0,noOptionsText:E.a.t("transferTicketModal.noOptions"),loading:b,renderInput:e=>i.jsx(m(),{...e,label:E.a.t("transferTicketModal.fieldLabel"),variant:"outlined",autoFocus:!0,onChange:e=>S(e.target.value),InputProps:{...e.InputProps,endAdornment:(0,i.jsxs)(r().Fragment,{children:[b?i.jsx(R(),{color:"inherit",size:20}):null,e.InputProps.endAdornment]})}})}),(0,i.jsxs)(f(),{variant:"outlined",className:P.maxWidth,children:[i.jsx(y(),{children:E.a.t("transferTicketModal.fieldQueueLabel")}),i.jsx(g(),{value:N,onChange:e=>F(e.target.value),label:E.a.t("transferTicketModal.fieldQueuePlaceholder"),children:u.map(e=>i.jsx(v(),{value:e.id,children:e.name},e.id))})]})]}),(0,i.jsxs)(k(),{children:[i.jsx(d(),{onClick:H,color:"secondary",disabled:b,variant:"outlined",children:E.a.t("transferTicketModal.buttons.cancel")}),i.jsx(L.Z,{variant:"contained",type:"submit",color:"primary",loading:b,children:E.a.t("transferTicketModal.buttons.ok")})]})]})})};n()}catch(e){n(e)}})},41447:(e,t,a)=>{a.d(t,{J:()=>r,_:()=>s});var n=a(20997),i=a(16689);let s=(0,i.createContext)(),r=({children:e})=>{let[t,a]=(0,i.useState)(null);return n.jsx(s.Provider,{value:{replyingMessage:t,setReplyingMessage:a},children:e})}},5557:(e,t,a)=>{a.d(t,{o:()=>i}),a(20997);var n=a(16689);a(14661);let i=(0,n.createContext)()},75542:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.d(t,{_:()=>l});var i=a(16689),s=a(151),r=e([s]);function l(e,t){let[a,n]=(0,i.useState)(()=>{try{let a=localStorage.getItem(e);return a?JSON.parse(a):t}catch(e){return(0,s.Z)(e),t}});return[a,t=>{try{let i=t instanceof Function?t(a):t;n(i),localStorage.setItem(e,JSON.stringify(i))}catch(e){(0,s.Z)(e)}}]}s=(r.then?(await r)():r)[0],n()}catch(e){n(e)}})},63802:(e,t,a)=>{a.d(t,{Z:()=>i});var n=a(38561);let i=()=>({findAll:async()=>{let{data:e}=await n.Z.get("/queue");return e}})},31871:(e,t,a)=>{a.d(t,{Z:()=>i});var n=a(38561);let i=()=>({save:async e=>{let{data:t}=await n.Z.request({url:"/quick-messages",method:"POST",data:e});return t},update:async e=>{let{data:t}=await n.Z.request({url:`/quick-messages/${e.id}`,method:"PUT",data:e});return t},deleteRecord:async e=>{let{data:t}=await n.Z.request({url:`/quick-messages/${e}`,method:"DELETE"});return t},list:async e=>{let{data:t}=await n.Z.request({url:"/quick-messages/list",method:"GET",params:e});return t}})},24497:(e,t,a)=>{a.d(t,{Z:()=>i});var n=a(38561);let i=()=>({saveNote:async e=>{let{data:t}=await n.Z.request({url:"/ticket-notes",method:"POST",data:e});return t},deleteNote:async e=>{let{data:t}=await n.Z.request({url:`/ticket-notes/${e}`,method:"DELETE"});return t},listNotes:async e=>{let{data:t}=await n.Z.request({url:"/ticket-notes/list",method:"GET",params:e});return t}})},44349:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.d(t,{Z:()=>o});var i=a(16689),s=a(151),r=a(38561),l=e([s]);s=(l.then?(await l)():l)[0];let o=({searchParam:e,tags:t,users:a,pageNumber:n,status:l,date:o,updatedAt:d,showAll:c,queueIds:m,withUnreadMessages:u})=>{let[p,h]=(0,i.useState)(!0),[g,x]=(0,i.useState)(!1),[f,j]=(0,i.useState)([]);return(0,i.useEffect)(()=>{h(!0);let i=setTimeout(()=>{(async()=>{try{let{data:i}=await r.Z.get("/tickets",{params:{searchParam:e,pageNumber:n,tags:t,users:a,status:l,date:o,updatedAt:d,showAll:c,queueIds:m,withUnreadMessages:u}});j(i.tickets),x(i.hasMore),h(!1)}catch(e){h(!1),(0,s.Z)(e)}})()},500);return()=>clearTimeout(i)},[e,t,a,n,l,o,d,c,m,u]),{tickets:f,loading:p,hasMore:g}};n()}catch(e){n(e)}})}};